"use strict";(self.webpackChunkassessment=self.webpackChunkassessment||[]).push([[8692],{536:(e,s,t)=>{t.r(s),t.d(s,{ConvertCredits:()=>o,default:()=>c});var a=t(47313),i=t(72231),n=t(46417);const r=e=>{let{data:s}=e;return(0,n.jsx)("div",{className:"wrapTable",children:(0,n.jsxs)("div",{className:"table",children:[(0,n.jsxs)("div",{className:"tableRow head",children:[(0,n.jsx)("div",{className:"num",children:"Nr."}),(0,n.jsx)("div",{className:"date",children:"Datum"}),(0,n.jsx)("div",{className:"type",children:"Typ"}),(0,n.jsx)("div",{className:"count",children:"Betrag"}),(0,n.jsx)("div",{className:"status",children:"Status"}),(0,n.jsx)("div",{className:"show"})]}),s.map((function(e,s){let t=0===e.typeId?"count payout":"sell count",a=3===e.statusId?"status done":2===e.statusId?"status progress":"status open",i=0===e.typeId?"-":"+";return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"tableRow body",children:[(0,n.jsx)("div",{className:"num",children:s+1}),(0,n.jsx)("div",{className:"date",children:e.date}),(0,n.jsx)("div",{className:"type",children:e.type}),(0,n.jsxs)("div",{className:t,children:[i,e.price]}),(0,n.jsx)("div",{className:a,children:e.status}),(0,n.jsx)("div",{className:"show",children:(0,n.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})})]}),e.hasOwnProperty("name")&&e.hasOwnProperty("iban")&&(0,n.jsxs)("div",{className:"userData",children:[(0,n.jsxs)("div",{className:"name",children:[(0,n.jsx)("p",{children:"Name"}),(0,n.jsx)("p",{children:e.name})]}),(0,n.jsxs)("div",{className:"iban",children:[(0,n.jsx)("p",{children:"IBAN"}),(0,n.jsx)("p",{children:e.iban})]})]}),e.hasOwnProperty("reason")&&e.hasOwnProperty("comment")&&(0,n.jsxs)("div",{className:"userData",children:[(0,n.jsxs)("div",{className:"name",children:[(0,n.jsx)("p",{children:"Zahlungsgrund"}),(0,n.jsx)("p",{children:e.reason})]}),e.comment&&(0,n.jsxs)("div",{className:"iban",children:[(0,n.jsx)("p",{children:"Kommentar"}),(0,n.jsx)("p",{children:e.comment})]})]})]},s)}))]})})};r.defaultProps={};const d=r;var l=t(78081);class o extends a.Component{constructor(e){super(e),this.state={data:{totalCredits:null,payoutOperations:[]},error:null},this.send=this.send.bind(this),this.deleteError=this.deleteError.bind(this),this.clickMaxTotalCredits=this.clickMaxTotalCredits.bind(this),this._setFormFields=this._setFormFields.bind(this)}componentDidUpdate(){$(".tableRow .show").prop("onclick",null).off("click"),$(".tableRow .show").on("click",(function(){$(this).parent().parent().find(".userData").toggle("slow"),$(this).find("i").hasClass("fa-plus")?$(this).find("i").removeClass("fa-plus").addClass("fa-minus"):$(this).find("i").removeClass("fa-minus").addClass("fa-plus")}))}componentWillReceiveProps(e){e.user.isLogin!==this.props.user.isLogin&&!1===e.user.isLogin&&i.mW.push("/"),e.user.data!==this.props.user.data&&e.user.data&&this._setPersonalDataFields(e.user.data)}componentDidMount(){document.getElementById("spinner-box-load").style.display="block",axios.get("/api/creditsPayoutList").then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({data:{...this.state.data,totalCredits:e.data.credits,payoutOperations:e.data.payouts}})})),axios.get("/api/accountData").then((e=>{this._setFormFields(e.data)}))}_setFormFields(e){let s=document.forms.payoutCredit;s.name.value="".concat(e.first_name," ").concat(e.last_name),s.iban.value="".concat(e.IBAN)}deleteError(){this.setState({error:null})}clickMaxTotalCredits(e){let s=e.target.innerText.slice(5);document.querySelector("#count").value=+s}send(e){e.preventDefault(),document.getElementById("spinner-box-load").style.display="block";let s=new FormData(document.forms.payoutCredit);axios.post("/api/storeCreditsPayout",s).then((e=>{document.forms.payoutCredit.count.value="",axios.get("/api/creditsPayoutList").then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({data:{...this.state.data,totalCredits:e.data.credits,payoutOperations:e.data.payouts}})}))})).catch((e=>{document.getElementById("spinner-box-load").style.display="none";let s=e.response.data;this.setState({error:s})}))}render(){let{data:e}=this.state;return(0,n.jsxs)("div",{className:"payoutCredits row clearfix",children:[(0,n.jsxs)("div",{className:"col-md-8 tableCredits",children:[(0,n.jsxs)("div",{className:"payCredits-forMobile",children:[(0,n.jsxs)("p",{className:"totalCredits",children:[e.totalCredits," credits"]}),(0,n.jsx)("button",{className:"btn",onClick:this.props.clickPayoutBtn,children:"Auszahlung"})]}),(0,n.jsxs)("span",{className:"descr",children:["1 credit = 1 ",window.currencyValue]}),(0,n.jsx)("p",{className:"title",children:"Auszahlung"}),e.payoutOperations.length>0&&(0,n.jsx)(d,{data:e.payoutOperations}),0===e.payoutOperations.length&&(0,n.jsx)("p",{children:"Es wurden bisher noch keine Auszahlungen get\xe4tigt."})]}),(0,n.jsxs)("div",{className:"col-md-4 formCredits",children:[(0,n.jsxs)("p",{className:"totalCredits",children:[e.totalCredits," credits"]}),(0,n.jsxs)("span",{className:"descr",children:["1 credit = 1 ",window.currencyValue]}),(0,n.jsx)("div",{className:"form",children:(0,n.jsxs)("form",{onSubmit:this.send,name:"payoutCredit",children:[(0,n.jsxs)("div",{className:"count",children:[(0,n.jsx)("input",{id:"count",onChange:this.state.error&&this.deleteError,type:"text",name:"count",placeholder:"Betrag",pattern:"[0-9]+([\\.,][0-9]+)?",required:!0}),this.state.error&&(0,n.jsx)("p",{className:"error",children:this.state.error}),e.totalCredits>0&&(0,n.jsx)("p",{children:(0,n.jsxs)("span",{onClick:this.clickMaxTotalCredits,children:["max. ",e.totalCredits]})})]}),(0,n.jsx)("input",{id:"iban",type:"text",name:"iban",placeholder:"IBAN",pattern:".{15,}",required:!0}),(0,n.jsx)("input",{id:"accountName",type:"text",name:"name",placeholder:"Vorname Nachname",required:!0}),(0,n.jsx)("button",{type:"submit",className:"btn",children:"Jetzt auszahlen"})]})})]})]})}}o.defaultProps={};const c=(0,l.$j)((function(e){return{user:e.user}}))(o)}}]);