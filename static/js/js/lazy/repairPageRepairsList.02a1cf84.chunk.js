(self.webpackChunkassessment=self.webpackChunkassessment||[]).push([[3138,2933,4289],{99915:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(47313),i=(s(72231),s(46417));const n=e=>{let{data:a,fromRepair:s}=e;(0,t.useEffect)((()=>{$("#BankPaymentModal").modal("show")}),[]);const n=()=>{window.localStorage.removeItem("bankPaymentData"),$("#BankPaymentModal").modal("hide")};return(0,i.jsx)("div",{className:"modal fade",id:"BankPaymentModal",tabIndex:"-1",role:"dialog","data-backdrop":"static","aria-labelledby":"myModalLabel",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("button",{type:"button",onClick:n,className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),(0,i.jsx)("h4",{className:"modal-title",id:"myModalLabel",children:"Bitte \xfcberweisen Sie das Geld auf das folgende Konto:"})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["Kontoinhaber Firmenname: ",a.companyName]}),(0,i.jsx)("li",{children:"Kontoinhaber Adresse: Gerbergasse 82, CH-4001 Basel"}),(0,i.jsxs)("li",{children:["Bankname: ",a.bankName]}),(0,i.jsxs)("li",{children:["IBAN: ",a.bankIban]}),(0,i.jsxs)("li",{children:["BIC/SWIFT: ",a.bankSwift]}),(0,i.jsxs)("li",{children:["Clearing: ",a.bankClearing]})]})}),(0,i.jsx)("div",{className:"modal-footer",children:(0,i.jsx)("button",{type:"button",onClick:n,className:"btn","data-dismiss":"modal",children:"Schliessen"})})]})})})};n.defaultProps={fromRepair:!1};const r=n},14045:(e,a,s)=>{"use strict";s.r(a),s.d(a,{RepairPageRepairsList:()=>D,default:()=>T});var t=s(47313),i=s(72231),n=s(31881),r=s.n(n),o=s(78081),l=s(39157),c=s(72905),d=s(73815),h=s(91066),p=s(99915),m=s(46417);class u extends t.Component{constructor(e){super(e),this.state={},this.mapBasketData=this.mapBasketData.bind(this),this.sendForm=this.sendForm.bind(this)}sendForm(){this.props.toggleSummaryPopup(),$('form.editFormWrap button[type="submit"]').click()}mapBasketData(e,a){let{removeFromBasket:s}=this.props,t=this.props.basketData.selectedOptions,i=0,n=null,r=e.priceMax;return t.forEach((e=>{+e.priceMax>i&&(i=+e.priceMax,n=e.shortcode)})),i>0&&i>=+e.priceMax&&(r=n===e.shortcode?e.priceMax:e.minPrice),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.title}),(0,m.jsx)("td",{children:(0,m.jsx)("span",{className:"count",children:"1"})}),(0,m.jsx)("td",{children:(0,m.jsxs)("span",{className:"price",children:[Math.round(100*+r)/100," ",window.currencyValue]})}),(0,m.jsx)("td",{children:(0,m.jsx)("span",{onClick:()=>s(e),className:"removeFromBasket"})})]},a)}render(){let{basketData:e,toggleSummaryPopup:a,totalPrice:s,removeFromBasket:t}=this.props;return s=e.shippingMethod?s+ +e.shippingMethod.price:s,(0,m.jsx)("div",{className:"summary-popup basketWrap",children:(0,m.jsx)("div",{className:"summary-popup-container",children:(0,m.jsx)("div",{className:"content",children:(0,m.jsxs)("div",{className:"col-xs-12",children:[(0,m.jsx)("div",{className:"top text-right",children:(0,m.jsx)("img",{loading:"lazy",src:"/images/design/simple-close-logForm.svg",onClick:a,alt:""})}),(0,m.jsxs)("div",{className:"body productWrap",children:[(0,m.jsx)("h3",{className:"title",children:"Bestell\xfcbersicht"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("table",{children:(0,m.jsxs)("tbody",{children:[e.selectedOptions.map(this.mapBasketData),e.shippingMethod&&(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.shippingMethod.name}),(0,m.jsx)("td",{}),(0,m.jsx)("td",{children:(0,m.jsxs)("span",{className:"price",children:[Math.round(100*+e.shippingMethod.price)/100," ",window.currencyValue]})}),(0,m.jsx)("td",{children:(0,m.jsx)("span",{onClick:()=>t(e.shippingMethod),className:"removeFromBasket"})})]})]})}),(0,m.jsxs)("div",{className:"total clearfix",children:[(0,m.jsx)("p",{className:"col-xs-6 title",children:"Total inkl. MwSt"}),(0,m.jsxs)("p",{className:"col-xs-6 priceTotal",children:[Math.round(100*+s)/100," ",window.currencyValue," "]})]})]}),(0,m.jsx)("div",{className:"commentField",children:(0,m.jsx)("textarea",{name:"comment",rows:"2",placeholder:"Notiz / Spezielle Anmerkung"})}),(0,m.jsx)("div",{className:"buttons",children:(0,m.jsxs)("button",{className:"btn",onClick:this.sendForm,children:["Jetzt bezahlen",(0,m.jsx)("span",{children:(0,m.jsx)("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"})})]})})]})]})})})})}}const g=u,x=e=>{let{props:a}=e;return(0,m.jsx)("ul",{className:"person-info",children:(0,m.jsxs)("div",{className:"delivery-form-form-send",children:[(0,m.jsx)("img",{loading:"lazy",className:"delivery-form-form-send__img",src:"",alt:""}),(0,m.jsx)("h1",{className:"delivery-form-form-send__title",children:"Thank you!"}),(0,m.jsx)("p",{className:"delivery-form-form-send__content",children:"I'm glad I can help you estimate the repair price of your device. Send it by postage"}),(0,m.jsxs)("div",{className:"delivery-form-form-send__details",children:[(0,m.jsx)("span",{className:"delivery-form-form-send__details-name",children:a.model.title}),(0,m.jsxs)("span",{className:"delivery-form-form-send__details-price",children:[a.totalPrice," ",window.currencyValue]})]}),(0,m.jsxs)("p",{className:"delivery-form-form-send__duration",children:["Duration:",(0,m.jsxs)("span",{className:"delivery-form-form-send__duration-period",children:[" ","2-3 days"]})]})]})})};class f extends t.Component{constructor(e){super(e),this.state={formData:new j,isChanged:{LieferLand:!1,RechnungLand:!1,LieferAnrede:!1,RechnungAnrede:!1,customerCompany:!1,shippingCompany:!1,LieferVorname:!1,LieferNachname:!1,RechnungNachname:!1,RechnungVorname:!1,LieferFirmenname:!1,RechnungFirmenname:!1,LieferTelefon:!1,RechnungTelefon:!1},country:{countriesList:[]},inputCheckbox:{shippingAddress:!0,shippingCompany:!1,customerCompany:!1,systemCompany:!1},payMethod:{method:null,payMethodDatatrans:null},payForm:null,shippingMethods:[],showSummaryPopup:!1,errors:{},formSend:!1},this.changeCheckbox=this.changeCheckbox.bind(this),this.changeCountry=this.changeCountry.bind(this),this.sendForm=this.sendForm.bind(this),this.choosePayMethod=this.choosePayMethod.bind(this),this._checkShowSpecialPayMethod=this._checkShowSpecialPayMethod.bind(this),this.toggleSummaryPopup=this.toggleSummaryPopup.bind(this),this.removeFromBasket=this.removeFromBasket.bind(this),this._setPersonalDataForm=this._setPersonalDataForm.bind(this),this._getShippingMethod=this._getShippingMethod.bind(this),this.handlerChangeInput=this.handlerChangeInput.bind(this),this.changeShippingMethod=this.changeShippingMethod.bind(this),this._addDatatrans=this._addDatatrans.bind(this),this._loadStripe=this._loadStripe.bind(this)}componentDidUpdate(){if(!window.isMobile){let e=0;$(".item-form-column").each((function(){$("div",this).height()>e&&(e=$("div",this).height())})).height(e)}}componentDidMount(){let{basketDataRepair:e,model:a}=this.props,s={...e,modelId:a.id};window.localStorage.setItem("basketDataRepair",JSON.stringify(s));this.setState({country:{...this.state.country,countriesList:[{value:"ch",label:"Schweiz"},{value:"li",label:"Liechtenstein"}]}}),window.isGoogleConnection&&h.o9.call(this,2),this._getShippingMethod(),this._addDatatrans(),this.props.user.isLogin&&r().get("/api/accountData").then((e=>this._setPersonalDataForm(e.data)))}componentWillReceiveProps(e){e.user.isLogin!==this.props.user.isLogin&&!0===e.user.isLogin&&r().get("/api/accountData").then((e=>this._setPersonalDataForm(e.data))),e.user.isLogin!==this.props.user.isLogin&&!1===e.user.isLogin&&this.setState({formData:new j,inputCheckbox:{...this.state.inputCheckbox,shippingCompany:!1,customerCompany:!1,systemCompany:!1}})}componentWillUnmount(){this.props.basketActions.changeShippingMethodRepair(null),document.getElementById("datatrans").remove(),this.stripeHandler&&this.stripeHandler.close()}_loadStripe(e){if(window.StripeCheckout)e();else{const a=document.createElement("script");a.onload=function(){e()},a.src="https://checkout.stripe.com/checkout.js",document.head.appendChild(a)}}_addDatatrans(){!function(e,a,s){var t,i=e.getElementsByTagName(a)[0];e.getElementById(s)||((t=e.createElement(a)).id=s,t.src="https://pay.datatrans.com/upp/payment/js/datatrans-1.0.2.js",i.parentNode.insertBefore(t,i))}(document,"script","datatrans")}changeShippingMethod(e,a){this.setState({errors:{...this.state.errors,[e.target.name]:""}}),this.props.basketActions.changeShippingMethodRepair(a)}_getShippingMethod(){r().get("/api/repairShippingMethods").then((e=>{if(this.props.shippingMethod){let a=e.data.filter((e=>"PICKAS"===e.shortcode))[0];this.setState({shippingMethods:[this.props.shippingMethod,a]}),this.props.basketActions.changeShippingMethodRepair(this.props.shippingMethod)}else this.setState({shippingMethods:e.data})}))}_setPersonalDataForm(e){let a={...this.state.formData},s={...this.state.inputCheckbox};for(let t in e)a.hasOwnProperty(t)&&(a[t]=e[t]),"company"===t&&(s.systemCompany=!!e[t]),"LieferFirmenname"===t&&(s.shippingCompany=!!e[t]),"RechnungFirmenname"===t&&(s.customerCompany=!!e[t]);this.setState({formData:a,inputCheckbox:s})}handlerChangeInput(e){let{name:a,value:s}=e.target,t={...this.state.formData},i={...this.state.inputCheckbox};this.autocomleteFieldsShippingBilling(e,t,i),this.changeShippingBillingForm(e),this.setState({errors:{...this.state.errors,[a]:null},formData:{...t,[a]:s},inputCheckbox:i})}changeCheckbox(e){let a={...this.state.inputCheckbox},{name:s}=e.target;e.target.getAttribute("data-show")?"true"===e.target.getAttribute("data-show")?a.shippingAddress=!1:a.shippingAddress=!0:(this.autocomleteFieldsShippingBilling(e,{},a),this.changeShippingBillingForm(e),a[s]=!a[s]),this.setState({inputCheckbox:a})}changeCountry(e,a){let s={target:{name:a,value:e.value}},t={...this.state.formData},i={...this.state.inputCheckbox};this.autocomleteFieldsShippingBilling(s,t,i),this.changeShippingBillingForm(s),this.setState({formData:{...t,[a]:e.value},errors:{...this.state.errors,[a]:""}})}changeShippingBillingForm(e){let{name:a}=e.target,s={...this.state.isChanged};s.hasOwnProperty(a)&&(s[a]=!0,this.setState({isChanged:s}))}autocomleteFieldsShippingBilling(e,a,s){let{name:t,value:i}=e.target,{isChanged:n}=this.state;switch(t){case"Geschlecht":n.LieferAnrede||(a.LieferAnrede=i),n.RechnungAnrede||(a.RechnungAnrede=i);break;case"Sprache":n.LieferLand||(a.LieferLand=i),n.RechnungLand||(a.RechnungLand=i);break;case"systemCompany":n.customerCompany||(s.customerCompany=e.target.checked),n.shippingCompany||(s.shippingCompany=e.target.checked);break;case"first_name":n.LieferVorname||(a.LieferVorname=i),n.RechnungVorname||(a.RechnungVorname=i);break;case"last_name":n.LieferNachname||(a.LieferNachname=i),n.RechnungNachname||(a.RechnungNachname=i);break;case"company":n.LieferFirmenname||(a.LieferFirmenname=i),n.RechnungFirmenname||(a.RechnungFirmenname=i);break;case"phone":n.LieferTelefon||(a.LieferTelefon=i),n.RechnungTelefon||(a.RechnungTelefon=i)}}removeFromBasket(e){if(11==e.productTypeId)this.props.basketActions.changeShippingMethodRepair(null);else{let a=[...this.props.basketDataRepair.selectedOptions].filter((a=>a.shortcode!==e.shortcode));this.props.basketActions.changeBasketDataRepair(a)}}toggleSummaryPopup(){this.state.showSummaryPopup?$(".delivery-form").css({zIndex:"auto"}):$(".delivery-form").css({zIndex:"1000001"}),this.setState({showSummaryPopup:!this.state.showSummaryPopup})}_checkShowSpecialPayMethod(){let{inputCheckbox:e,formData:a}=this.state;return e.shippingAddress?e.systemCompany&&a.company&&e.customerCompany&&a.RechnungFirmenname:e.systemCompany&&a.company&&e.shippingCompany&&a.LieferFirmenname&&e.customerCompany&&a.RechnungFirmenname}sendForm(e){e.preventDefault();let{basketDataRepair:a,model:s}=this.props,t={...this.state.inputCheckbox},n={...this.state.formData,repairs:a.selectedOptions.map((e=>e.shortcode)),shippingMethodShortcode:a.shippingMethod.shortcode,shippingAddress:this.state.inputCheckbox.shippingAddress?"billing":"custom",shippingCompany:t.shippingCompany,customerCompany:t.customerCompany,systemCompany:t.systemCompany,modelId:s.id};document.getElementById("spinner-box-load").style.display="block",r().post("/api/bookingWithShipping",n).then((e=>{if(document.getElementById("spinner-box-load").style.display="none",200===e.status){this.setState({formSend:!0}),this.props.submitForm();let t={...a,modelId:s.id};window.localStorage.setItem("basketDataRepair",JSON.stringify(t)),"Datatrans"===this.state.payMethod.method?(this.setState({payForm:(0,m.jsx)("form",{id:"paymentForm","data-merchant-id":"3000012768","data-amount":Math.round(100*e.data.totalPrice),"data-currency":"CHF","data-paymentmethod":this.state.payMethod.payMethodDatatrans,"data-refno":e.data.basketShortcode,"data-sign":"180103170812117471"})}),Datatrans.startPayment({form:"#paymentForm",closed:()=>{r().get("/api/closePaymentWindow?basketShortcode=".concat(e.data.basketShortcode,"&\n                                                                    totalPrice=").concat(e.data.totalPrice,"&paymentMethod=").concat(this.state.payMethod.payMethodDatatrans)),this.setState({payForm:null})}})):"Stripe"===this.state.payMethod.method?this._loadStripe((()=>{let a=!1;this.stripeHandler=window.StripeCheckout.configure({key:window.stripeKey.key,image:"/images/logo.png",locale:"auto",currency:"EUR",token:s=>{s.id&&(document.getElementById("spinner-box-load").style.display="block",r().get("/api/stripePayment?tokenId=".concat(s.id,"&basketShortcode=").concat(e.data.basketShortcode,"&\n                                                        email=").concat(s.email)).then((e=>{document.getElementById("spinner-box-load").style.display="none"})).catch((e=>{document.getElementById("spinner-box-load").style.display="none",404===e.response.status&&i.mW.push("/reparieren/error-payment")})),a=!0)},closed:()=>{a||r().get("/api/closePaymentWindow?basketShortcode=".concat(e.data.basketShortcode,"&\n                                                       totalPrice=").concat(e.data.totalPrice,"&paymentMethod=").concat(this.state.payMethod.payMethodDatatrans))}}),document.querySelector(".stripe-button-el")&&(document.querySelector(".stripe-button-el").style.display="none"),this.stripeHandler.open({amount:100*e.data.totalPrice,name:"Remarket",allowRememberMe:!1})})):"Vorauskasse/\xdcberweisung"===this.state.payMethod.method?(document.getElementById("spinner-box-load").style.display="block",r().get("/api/bankPayment?basketShortcode=".concat(e.data.basketShortcode)).then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({bankPaymentModal:(0,m.jsx)(p.Z,{data:e.data,fromRepair:!0})})})).catch((e=>{404===e.response.status&&i.mW.push("/reparieren/error-payment")}))):"PayPal"===this.state.payMethod.method?(document.getElementById("spinner-box-load").style.display="block",r().get("/api/paypalPayment?basketShortcode=".concat(e.data.basketShortcode)).then((e=>{window.open(e.data.link,"_self")}))):"PerRechnung"===this.state.payMethod.method?(document.getElementById("spinner-box-load").style.display="block",r().get("/api/paymentByInvoice?basketShortcode=".concat(e.data.basketShortcode)).then((e=>{document.getElementById("spinner-box-load").style.display="none"})).catch((e=>{404===e.response.status&&i.mW.push("/reparieren/error-payment")}))):"payInShop"===this.state.payMethod.method&&(document.getElementById("spinner-box-load").style.display="block",r().get("/api/paymentByCash?basketShortcode=".concat(e.data.basketShortcode)).then((e=>{document.getElementById("spinner-box-load").style.display="none"})).catch((e=>{404===e.response.status&&i.mW.push("/reparieren/error-payment")})))}})).catch((e=>{document.getElementById("spinner-box-load").style.display="none";let a=e.response.data.errors,s={};for(let t in a)s[t]=a[t][0];this.setState({errors:s})}))}sendByBicycle(){}choosePayMethod(e){let a=e.target.value,s=e.target.getAttribute("data-paymethoddatatrans");this.setState({payMethod:{...this.state.payMethod,method:a,payMethodDatatrans:s}})}cancelSendByEnter(e){if("Enter"===e.key)return e.preventDefault(),!1}render(){let{country:e,inputCheckbox:a,formData:s,shippingMethods:t,showSummaryPopup:i,errors:n,formSend:r}=this.state,{shippingMethod:o}=this.props.basketDataRepair,c=window.domainName.name.split(".")[window.domainName.name.split(".").length-1],d=Math.round(100*this.props.totalPrice)/100!==0,h=this._checkShowSpecialPayMethod(),p=a.shippingAddress?"col-md-4 col-sm-6 item-form-column ":"col-md-3 col-sm-6 item-form-column";return(0,m.jsxs)("div",{className:"delivery-post",children:[!r&&(0,m.jsxs)("div",{children:[!this.props.mountedInBicycleForm&&(0,m.jsxs)("div",{className:"price",children:[(0,m.jsx)("h3",{className:"title",children:"Preis"}),(0,m.jsxs)("p",{className:"value",children:[this.props.totalPrice," ","ch"===c?"CHF":"EUR"]})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("form",{name:"deliveryByPostForm",className:"editFormWrap",onKeyPress:this.cancelSendByEnter.bind(this),onSubmit:this.sendForm,children:[(0,m.jsx)("div",{className:p,children:(0,m.jsxs)("div",{className:"user-data personal",children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"1"}),"Pers\xf6nliche Angaben"]}),(0,m.jsxs)("div",{className:"topPersonalData",children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"Geschlecht",checked:"Herr"==s.Geschlecht,onChange:this.handlerChangeInput,value:"Herr",required:!0}),(0,m.jsx)("span",{}),"Herr"]}),(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"Geschlecht",checked:"Frau"==s.Geschlecht,onChange:this.handlerChangeInput,value:"Frau"}),(0,m.jsx)("span",{}),"Frau"]}),n.Geschlecht&&(0,m.jsx)("p",{className:"info error",children:n.Geschlecht})]}),(0,m.jsxs)("div",{className:"personalDataInputHalf",children:[(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.first_name,onChange:this.handlerChangeInput,name:"first_name",placeholder:"Vorname",required:!0}),n.first_name&&(0,m.jsx)("p",{className:"info error",children:n.first_name})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.last_name,onChange:this.handlerChangeInput,name:"last_name",placeholder:"Nachname",required:!0}),n.last_name&&(0,m.jsx)("p",{className:"info error",children:n.last_name})]})]}),(0,m.jsx)("div",{className:"inputFullWidth",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"email",value:s.email,onChange:this.handlerChangeInput,name:"email",placeholder:"E-Mail",required:!0}),n.email&&(0,m.jsx)("p",{className:"info error",children:n.email})]})}),(0,m.jsx)("div",{className:"inputFullWidth",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.phone,onChange:this.handlerChangeInput,name:"phone",placeholder:"Telefon (mobil)",required:!0}),n.phone&&(0,m.jsx)("p",{className:"info error",children:n.phone})]})}),!e.countriesList.some((e=>e.value===s.Sprache.toLowerCase()))&&(0,m.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.Sprache.toLowerCase(),name:"Sprache",clearable:!1,options:e.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"Sprache")}),n.Sprache&&(0,m.jsx)("p",{className:"info error",children:n.Sprache})]}),(0,m.jsxs)("label",{className:"labelCompany",children:[(0,m.jsx)("input",{type:"checkbox",value:a.systemCompany,name:"systemCompany",checked:a.systemCompany,onChange:this.changeCheckbox}),(0,m.jsx)("span",{className:"check"}),(0,m.jsx)("span",{className:"text",children:"Firma"})]}),(0,m.jsx)("div",{className:a.systemCompany?"inputFullWidth":"inputFullWidth hide",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.company,onChange:this.handlerChangeInput,name:"company",placeholder:"Firma",required:a.systemCompany}),n.company&&(0,m.jsx)("p",{className:"info error",children:n.company})]})}),(0,m.jsx)("div",{className:a.systemCompany?"inputFullWidth":"inputFullWidth hide",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.vat,onChange:this.handlerChangeInput,name:"vat",placeholder:"Company number",required:a.systemCompany}),n.vat&&(0,m.jsx)("p",{className:"info error",children:n.vat})]})})]})}),(0,m.jsx)("div",{className:p,children:(0,m.jsxs)("div",{className:"user-data billing",children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"2"}),"Rechnungs-",(0,m.jsx)("br",{}),"adresse"]}),(0,m.jsxs)("div",{className:"topPersonalData",children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:"Herr"==s.RechnungAnrede,onChange:this.handlerChangeInput,name:"RechnungAnrede",required:!0,value:"Herr"}),(0,m.jsx)("span",{}),"Herr"]}),(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:"Frau"==s.RechnungAnrede,onChange:this.handlerChangeInput,name:"RechnungAnrede",required:!0,value:"Frau"}),(0,m.jsx)("span",{}),"Frau"]}),n.RechnungAnrede&&(0,m.jsx)("p",{className:"info error",children:n.RechnungAnrede})]}),(0,m.jsxs)("div",{className:"personalDataInputHalf",children:[(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungVorname,onChange:this.handlerChangeInput,name:"RechnungVorname",placeholder:"Vorname",required:!0}),n.RechnungVorname&&(0,m.jsx)("p",{className:"info error",children:n.RechnungVorname})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungNachname,onChange:this.handlerChangeInput,name:"RechnungNachname",placeholder:"Nachname",required:!0}),n.RechnungNachname&&(0,m.jsx)("p",{className:"info error",children:n.RechnungNachname})]})]}),(0,m.jsx)("div",{className:"inputFullWidth street",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungStrasse,onChange:this.handlerChangeInput,name:"RechnungStrasse",id:"customer_route",placeholder:"Adresse",required:!0}),n.RechnungStrasse&&(0,m.jsx)("p",{className:"info error",children:n.RechnungStrasse})]})}),(0,m.jsx)("div",{className:"personalDataInputHalf",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungHausnummer,onChange:this.handlerChangeInput,name:"RechnungHausnummer",id:"customer_street_number",placeholder:"Nr.",required:!0}),n.RechnungHausnummer&&(0,m.jsx)("p",{className:"info error",children:n.RechnungHausnummer})]})}),(0,m.jsxs)("div",{className:"personalDataInputHalf",children:[(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungPLZ,onChange:this.handlerChangeInput,name:"RechnungPLZ",placeholder:"PLZ",id:"customer_postal_code",required:!0}),n.RechnungPLZ&&(0,m.jsx)("p",{className:"info error",children:n.RechnungPLZ})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungStadt,onChange:this.handlerChangeInput,name:"RechnungStadt",placeholder:"Stadt",id:"customer_locality",required:!0}),n.RechnungStadt&&(0,m.jsx)("p",{className:"info error",children:n.RechnungStadt})]})]}),!e.countriesList.some((e=>e.value===s.RechnungLand.toLowerCase()))&&(0,m.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.RechnungLand.toLowerCase(),name:"RechnungLand",clearable:!1,options:e.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"RechnungLand")}),n.RechnungLand&&(0,m.jsx)("p",{className:"info error",children:n.RechnungLand})]}),(0,m.jsx)("div",{className:"inputFullWidth",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungTelefon,onChange:this.handlerChangeInput,name:"RechnungTelefon",placeholder:"Telefon",required:!0}),n.RechnungTelefon&&(0,m.jsx)("p",{className:"info error",children:n.RechnungTelefon})]})}),(0,m.jsxs)("label",{className:"labelCompany",children:[(0,m.jsx)("input",{type:"checkbox",name:"customerCompany",value:a.customerCompany,checked:a.customerCompany,onClick:this.changeCheckbox}),(0,m.jsx)("span",{className:"check"}),(0,m.jsx)("span",{className:"text",children:"Firma"})]}),(0,m.jsx)("div",{className:a.customerCompany?"inputFullWidth":"inputFullWidth hide",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.RechnungFirmenname,onChange:this.handlerChangeInput,name:"RechnungFirmenname",placeholder:"Firma",required:a.customerCompany}),n.RechnungFirmenname&&(0,m.jsx)("p",{className:"info error",children:n.RechnungFirmenname})]})}),(0,m.jsxs)("div",{className:"topPersonalData showBillingForm",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("label",{style:{width:"100%"},children:[(0,m.jsx)("input",{type:"radio",value:"billing",name:"shippingAddress","data-show":"false",checked:a.shippingAddress,onChange:this.changeCheckbox}),(0,m.jsx)("span",{}),"Lieferadresse = Rechnungsadresse"]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{style:{width:"100%"},children:[(0,m.jsx)("input",{type:"radio",value:"custom",name:"shippingAddress","data-show":"true",checked:!a.shippingAddress,onChange:this.changeCheckbox}),(0,m.jsx)("span",{}),"Lieferadresse erstellen"]})})]})]})}),(0,m.jsx)("div",{className:!0===a.shippingAddress?"hide col-md-3 col-sm-6 item-form-column":"col-sm-6 col-md-3 item-form-column",children:(0,m.jsxs)("div",{className:"user-data shipping",children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"3"}),"Liefer-",(0,m.jsx)("br",{}),"adresse"]}),(0,m.jsxs)("div",{className:"topPersonalData",children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:"Herr"==s.LieferAnrede,onChange:this.handlerChangeInput,name:"LieferAnrede",value:"Herr",required:!a.shippingAddress}),(0,m.jsx)("span",{}),"Herr"]}),(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:"Frau"==s.LieferAnrede,onChange:this.handlerChangeInput,name:"LieferAnrede",value:"Frau",required:!a.shippingAddress}),(0,m.jsx)("span",{}),"Frau"]}),n.LieferAnrede&&(0,m.jsx)("p",{className:"info error",children:n.LieferAnrede})]}),(0,m.jsxs)("div",{className:"personalDataInputHalf",children:[(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferVorname,onChange:this.handlerChangeInput,name:"LieferVorname",placeholder:"Vorname",required:!a.shippingAddress}),n.LieferVorname&&(0,m.jsx)("p",{className:"info error",children:n.LieferVorname})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferNachname,onChange:this.handlerChangeInput,name:"LieferNachname",placeholder:"Nachname",required:!a.shippingAddress}),n.LieferNachname&&(0,m.jsx)("p",{className:"info error",children:n.LieferNachname})]})]}),(0,m.jsx)("div",{className:"inputFullWidth street",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferStrasse,onChange:this.handlerChangeInput,name:"LieferStrasse",id:"route",placeholder:"Strasse",required:!a.shippingAddress}),n.LieferStrasse&&(0,m.jsx)("p",{className:"info error",children:n.LieferStrasse})]})}),(0,m.jsx)("div",{className:"personalDataInputHalf",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferHausnummer,onChange:this.handlerChangeInput,name:"LieferHausnummer",id:"street_number",placeholder:"Nr.",required:!a.shippingAddress}),n.LieferHausnummer&&(0,m.jsx)("p",{className:"info error",children:n.LieferHausnummer})]})}),(0,m.jsxs)("div",{className:"personalDataInputHalf",children:[(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferPLZ,onChange:this.handlerChangeInput,name:"LieferPLZ",placeholder:"PLZ",id:"postal_code",required:!a.shippingAddress}),n.LieferPLZ&&(0,m.jsx)("p",{className:"info error",children:n.LieferPLZ})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferStadt,onChange:this.handlerChangeInput,name:"LieferStadt",placeholder:"Stadt",id:"locality",required:!a.shippingAddress}),n.LieferStadt&&(0,m.jsx)("p",{className:"info error",children:n.LieferStadt})]})]}),!e.countriesList.some((e=>e.value===s.LieferLand.toLowerCase()))&&!0!==a.shippingAddress&&(0,m.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.LieferLand.toLowerCase(),name:"LieferLand",clearable:!1,options:e.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"LieferLand")}),n.LieferLand&&(0,m.jsx)("p",{className:"info error",children:n.LieferLand})]}),(0,m.jsx)("div",{className:"inputFullWidth phone",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferTelefon,onChange:this.handlerChangeInput,name:"LieferTelefon",placeholder:"Telefon",required:!a.shippingAddress}),n.LieferTelefon&&(0,m.jsx)("p",{className:"info error",children:n.LieferTelefon})]})}),(0,m.jsxs)("label",{className:"labelCompany",children:[(0,m.jsx)("input",{type:"checkbox",value:a.shippingCompany,name:"shippingCompany",checked:a.shippingCompany,onChange:this.changeCheckbox}),(0,m.jsx)("span",{className:"check"}),(0,m.jsx)("span",{className:"text",children:"Firma"})]}),(0,m.jsx)("div",{className:a.shippingCompany?"inputFullWidth":"inputFullWidth hide",children:(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:s.LieferFirmenname,onChange:this.handlerChangeInput,name:"LieferFirmenname",placeholder:"Firma",required:a.shippingCompany}),n.LieferFirmenname&&(0,m.jsx)("p",{className:"info error",children:n.LieferFirmenname})]})})]})}),(0,m.jsx)("div",{className:p,children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"shipping-method",children:[(0,m.jsx)("h4",{className:"title",children:"Versandmethode:"}),(0,m.jsx)("div",{className:"topPersonalData",children:t.map(((e,a)=>(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",required:!0,onChange:a=>this.changeShippingMethod(a,e),checked:o&&e.shortcode===o.shortcode,value:e.shortcode,name:"shippingMethodShortcode"}),(0,m.jsx)("span",{}),e.name]},a)))}),n.shippingMethodShortcode&&(0,m.jsx)("p",{className:"info error",children:n.shippingMethodShortcode})]}),(0,m.jsxs)("div",{className:"payment-method",children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"4"}),"Zahlungsmethode"]}),(0,m.jsx)("span",{className:"view-summary",onClick:this.toggleSummaryPopup,children:"Zusammenfassung anzeigen"}),(0,m.jsx)("div",{className:"topPersonalData",children:(0,m.jsxs)("ul",{onChange:this.choosePayMethod,children:[o&&"PICKAS"===o.shortcode&&(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"payInShop"}),(0,m.jsx)("span",{className:"radio"}),"Zahlung bei Abholung"]})}),"ch"===c&&(0,m.jsxs)("div",{children:[(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Datatrans","data-paymethoddatatrans":"VIS"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/4.png",width:"24",height:"24",className:"payment-icon",alt:"Visa"}),"Visa"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Datatrans","data-paymethoddatatrans":"ECA"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/5.png",width:"24",height:"24",className:"payment-icon",alt:"Mastercard"}),"Mastercard"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Datatrans","data-paymethoddatatrans":"PFC"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/3.png",width:"24",height:"24",className:"payment-icon",alt:"PostFinance Card"}),"PostFinance Card"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Datatrans","data-paymethoddatatrans":"TWI"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/17.png",width:"24",height:"24",className:"payment-icon",alt:"Diners Club"}),"TWINT Wallet"," "]})})]}),"de"===c&&(0,m.jsxs)("div",{children:[(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Stripe"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/4.png",width:"24",height:"24",className:"payment-icon",alt:"Visa"}),"Visa"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Stripe"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/5.png",width:"24",height:"24",className:"payment-icon",alt:"Mastercard"}),"Mastercard"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"Stripe"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/7.png",width:"24",height:"24",className:"payment-icon",alt:"American Express"}),"American Express"]})})]}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",required:d,value:"PayPal"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/6.png",width:"24",height:"24",className:"payment-icon",alt:"PayPal"}),"PayPal"]})}),(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",value:"Vorauskasse/\xdcberweisung"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/10.png",width:"24",height:"24",className:"payment-icon",alt:"Vorauskasse"}),"Vorauskasse"]})}),h&&(0,m.jsx)("li",{children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",name:"payment_method",value:"PerRechnung"}),(0,m.jsx)("span",{className:"radio"}),(0,m.jsx)("img",{loading:"lazy",src:"/images/icons/payment-type/",width:"24",height:"24",className:"payment-icon",alt:"Per Rechnung"}),"Per Rechnung"]})})]})})]}),(0,m.jsxs)("button",{type:"submit",className:"btn",onSubmit:this.sendForm,onClick:this.props.selectDesiredButton,children:["Weiter",(0,m.jsx)("span",{children:(0,m.jsx)("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"})})]})]})})]})}),this.state.bankPaymentModal,this.state.payForm,i&&(0,m.jsx)(g,{basketData:this.props.basketDataRepair,sendForm:this.sendForm,removeFromBasket:this.removeFromBasket,totalPrice:this.props.totalPrice,toggleSummaryPopup:this.toggleSummaryPopup})]}),r&&(0,m.jsxs)("div",{children:[(0,m.jsx)(x,{props:this.props}),(0,m.jsxs)("p",{className:"delivery-form-form-send-text",children:["you can spontaneously forward your"," ",this.props.model.title.split(" ")[1]," during our opening hours for the repair and wait directly onthe rapaired"," ",this.props.model.title.split(" ")[1],"!"]})]})]})}}f.defaultProps={mountedInBicycleForm:!1};const y=(0,o.$j)((function(e){return{user:e.user,basketDataRepair:e.basket.basketDataRepair}}),(function(e){return{basketActions:(0,c.DE)(d,e)}}))(f);function j(){this.Geschlecht="",this.first_name="",this.last_name="",this.email="",this.phone="",this.Sprache="ch",this.company="",this.vat="",this.RechnungAnrede="",this.RechnungVorname="",this.RechnungNachname="",this.RechnungStrasse="",this.RechnungHausnummer="",this.RechnungPLZ="",this.RechnungStadt="",this.RechnungLand="ch",this.RechnungTelefon="",this.RechnungFirmenname="",this.LieferAnrede="",this.LieferVorname="",this.LieferNachname="",this.LieferStrasse="",this.LieferHausnummer="",this.LieferPLZ="",this.LieferStadt="",this.LieferLand="ch",this.LieferTelefon="",this.LieferFirmenname=""}var v=s(12279),b=s.n(v);class N extends t.Component{constructor(e){super(e),this.state={showInfo:!1,info:{price:null,shortcode:null,name:null},errors:{zip:null},formWasSubmit:!1},this.handleChangeZip=this.handleChangeZip.bind(this)}componentWillMount(){this.inputZipCallback=b()((function(e){let a=document.querySelector('.delivery-bicycle input[name="zip"]').value;axios.get("/api/checkShippingZip?zip=".concat(a)).then((e=>{this.setState({info:e.data,showInfo:!0})})).catch((e=>{let a=e.response.data.errors.zip[0];this.setState({errors:{...this.state.errors,zip:a},showInfo:!1})}))}),1e3)}submitForm(){this.setState({formWasSubmit:!0})}handleChangeZip(e){this.setState({errors:{...this.state.errors,zip:null},showInfo:!1}),e.persist(),this.inputZipCallback(e)}render(){let{totalPrice:e}=this.props,{info:a,showInfo:s,formWasSubmit:t}=this.state;return(0,m.jsxs)("div",{className:"delivery-bicycle",children:[!t&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"price",children:[(0,m.jsx)("h3",{className:"title",children:"price"}),(0,m.jsxs)("p",{className:"value",children:[e," ",window.currencyValue]})]}),(0,m.jsxs)("div",{className:"row row-flex",children:[(0,m.jsx)("div",{className:"col-sm-6 item-column ",children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"1"}),"Calculate the price"]}),(0,m.jsxs)("div",{className:"content",children:[(0,m.jsxs)("p",{children:["Please enter your ",(0,m.jsx)("span",{className:"bold",children:"zip code"})," ","where ",(0,m.jsx)("br",{})," the device is to be collected:"]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"number",name:"zip",placeholder:"e.g. 4132",onChange:this.handleChangeZip}),this.state.errors.zip&&(0,m.jsx)("p",{className:"error",children:this.state.errors.zip})]}),(0,m.jsxs)("div",{className:s?"info show":"info",children:[a.name&&(0,m.jsx)("p",{children:a.name}),a.price&&(0,m.jsxs)("p",{children:["Price:"," ",(0,m.jsxs)("span",{className:"bold",children:[a.price," ",window.currencyValue]})," ","(flat rate per route)"]}),(0,m.jsxs)("p",{children:["You can call one of the two shipping companies at any time (at step 2. and specify your desired or desired time for collection."," "]}),(0,m.jsxs)("p",{children:["Please name ",(0,m.jsx)("span",{className:"bold",children:'"Standard"'})," ","(shipping within 60 minutes) and our customer reference: iReparation as invoice recipient."," "]}),(0,m.jsx)("p",{children:"Please enter your address as the shipping destination."})]})]})]})}),(0,m.jsx)("div",{className:"col-sm-6 item-column",children:(0,m.jsxs)("div",{className:"right-part",children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"2"}),"Enter your contact data"]}),(0,m.jsxs)("div",{className:"content",children:[(0,m.jsxs)("div",{className:"numPhone",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/guy-banner.svg",alt:""}),(0,m.jsx)("span",{children:(0,m.jsx)("a",{href:"tel:+615118043",children:"+615118043"})})]}),(0,m.jsxs)("div",{className:"address",children:[(0,m.jsxs)("div",{className:"item-column",children:[(0,m.jsx)("p",{className:"category",children:"Basel Branch"}),(0,m.jsx)("p",{children:"remarket.ch GmbH"}),(0,m.jsx)("p",{children:"Gerbergasse 82"}),(0,m.jsx)("p",{children:"4001 Basel"})]}),(0,m.jsxs)("div",{className:"item-column",children:[(0,m.jsx)("p",{className:"category",children:"Opening hours"}),(0,m.jsxs)("p",{className:"time",children:["Mon - Fri ",(0,m.jsx)("br",{})," 09:00 - 18:30"]}),(0,m.jsxs)("p",{className:"time",children:["Sat ",(0,m.jsx)("br",{})," 10:00 - 18_00"]})]})]})]})]})})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("div",{className:"info-block",children:[(0,m.jsxs)("p",{children:["You are welcome to choose one of our two Velokurierpartner for an EXPRESS delivery. We carry out most of the repairs EXPRESS on the spot, so you only have to do without your bike for about 60 minutes (+ journey from the cyclist) and use it again."," "]}),(0,m.jsx)("p",{className:"small",children:"Information : The collection and delivery service by Velokurier is only possible for corporate customers"})]})})}),s&&(0,m.jsx)(y,{mountedInBicycleForm:!0,totalPrice:e,model:this.props.model,submitForm:this.submitForm.bind(this),shippingMethod:a})]}),t&&(0,m.jsx)(x,{props:this.props})]})}}const k=N;var C=s(89850),w=s.n(C),S=s(44251),P=s.n(S);class R extends t.Component{constructor(e){super(e),this.state={showInfo:!1,captcha:{isCheckCaptcha:!1,errorCaptcha:!1},isSelectTime:!1,formData:{firstName:"",lastName:"",email:"",phone:"",colorValue:""},openHours:null,formWasSubmited:!1,errors:{datetime:""}},this.verifyCaptchaCallback=this.verifyCaptchaCallback.bind(this),this.sendForm=this.sendForm.bind(this),this.showCaptcha=this.showCaptcha.bind(this),this._setDataFields=this._setDataFields.bind(this),this.changePhoneNumber=this.changePhoneNumber.bind(this),this._initCalendar=this._initCalendar.bind(this),this.changeColor=this.changeColor.bind(this),this.handlerChangeInput=this.handlerChangeInput.bind(this),this._initMap=this._initMap.bind(this)}componentDidUpdate(){_(),L()}componentWillReceiveProps(e){e.user.isLogin!==this.props.user.isLogin&&!0===e.user.isLogin&&this._setDataFields(e.user.data),e.user.isLogin!==this.props.user.isLogin&&!1===e.user.isLogin&&this.setState({formData:{firstName:"",lastName:"",email:"",phone:"",colorValue:""}}),e.totalTime!==this.props.totalTime&&($("#input").datetimepicker("destroy"),this._initCalendar(e.totalTime))}componentDidMount(){this._initCalendar(this.props.totalTime),_(),this.props.user.isLogin&&this._setDataFields(this.props.user.data),window.isGoogleConnection&&this._initMap()}changePhoneNumber(e){this.setState({formData:{...this.state.formData,phone:e}})}handlerChangeInput(e){let{name:a,value:s}=e.target;this.setState({errors:{...this.state.errors,[a]:null},formData:{...this.state.formData,[a]:s}})}_initCalendar(e){let a=[],s=e,t=o(),i=null,n=null,r=this;function o(){let e=new Date;return e.getHours()+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}function l(e,s){if(e.forEach(((e,t)=>{s==t&&(i=e.from||0,n=e.to||0),e.from||e.to||a.push(t)})),n){let e=n.split("");e[e.length-1]=+e[e.length-1]+1,n=e.join("")}}function c(){let e=60*s+1,a=Math.ceil(e/30);$(".xdsoft_time_variant .xdsoft_time").each((function(e,s){let t=$(".xdsoft_time_variant .xdsoft_time");e+a>=t.length&&$(this).css({opacity:".4",pointerEvents:"none"})}))}axios.get("/api/getShopOpenHours").then((e=>{let s=(new Date).getDay();l(e.data,s),function(e,a,s){$.datetimepicker.setLocale("de"),$("#datetimepicker").datetimepicker({formatDate:"d.m.Y",formatTime:"H:i",inline:!0,step:30,minDate:new Date,disabledWeekDays:s,minTime:e,maxTime:a,scrollMonth:!1,defaultSelect:!1,onChangeDateTime:function(e,a){_(),L()},onChangeMonth:function(){_()},onChangeYear:function(){_()},onGenerate:function(e,a){setTimeout((()=>{_(),L(),c()}),10)},onSelectTime:function(){r.setState({isSelectTime:!0})},onSelectDate:function(e,a){let s=new Date,t=s.getFullYear(),d=s.getMonth(),h=s.getDate(),p=e.getFullYear(),m=e.getMonth(),u=e.getDate(),g=t===p&&d===m&&h===u;l(r.state.openHours,e.getDay()),g&&(i=o()),$("#datetimepicker").datetimepicker("setOptions",{minTime:i,maxTime:n}),setTimeout((()=>{c(),[...$(".xdsoft_time_variant .xdsoft_time")].forEach((e=>e.classList.remove("xdsoft_current")))}),20),r.setState({errors:{...r.state.errors,datetime:""},isSelectTime:!1})}})}(t,n,a),this.setState({openHours:e.data})}))}_setDataFields(e){let a=e.systemAddress.email,s=e.systemAddress.phone,t=e.systemAddress.first_name,i=e.systemAddress.last_name;s&&0===s.indexOf("0041")&&(s="+"+s.slice(2)),this.setState({formData:{...this.state.formData,email:a,phone:s,firstName:t,lastName:i}})}verifyCaptchaCallback(e){this.setState({captcha:{...this.state.captcha,isCheckCaptcha:!0,errorCaptcha:!1}})}showCaptcha(e){let{captcha:a}=this.state;a.isCheckCaptcha?(this.recaptchaInstance.reset(),this.setState({captcha:{...this.state.captcha,isCheckCaptcha:!1,errorCaptcha:!1}})):this.recaptchaInstance.execute()}sendForm(e){e.preventDefault();let{captcha:a,isSelectTime:s}=this.state,{selectedRepairOptions:t,model:i}=this.props,n=Date.parse((o=new Date($("#datetimepicker").datetimepicker("getValue")),new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds())))),r={...this.state.formData,datetime:n,repairs:t.map((e=>e.shortcode)),modelId:i.id,colorId:this.state.formData.colorValue&&this.state.formData.colorValue.id};var o;!a.isCheckCaptcha&&window.isGoogleConnection||!s?this.setState({captcha:{...this.state.captcha,errorCaptcha:!a.isCheckCaptcha},errors:{...this.state.errors,datetime:!s&&"Date/time field is required"}}):(document.getElementById("spinner-box-load").style.display="block",axios.post("/api/bookingWithShopVisit",r).then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({formWasSubmited:!0})})).catch((e=>{document.getElementById("spinner-box-load").style.display="none";let a=e.response.data.errors,s={};for(let t in a)s[t]=a[t][0];this.setState({errors:s})})))}changeColor(e){this.setState({formData:{...this.state.formData,colorValue:e},errors:{...this.state.errors,colorId:""}})}mapColorOptionSelected(e){return(0,m.jsxs)("span",{children:[e.value,(0,m.jsx)("span",{className:"colorPic",style:{background:e.code}})]})}mapColorOption(e){return(0,m.jsxs)("span",{children:[e.value,(0,m.jsx)("span",{className:"colorPic",style:{background:e.code}})]})}_initMap(){function e(e,a,s){this.latlng=e,this.args=s,this.setMap(a)}e.prototype=new google.maps.OverlayView,e.prototype.draw=function(){let e=this.div;e||(e=this.div=document.createElement("div"),e.className="mapMarker",this.getPanes().overlayImage.appendChild(e));var a=this.getProjection().fromLatLngToDivPixel(this.latlng);a&&(e.style.left=a.x-20+"px",e.style.top=a.y+"px")};let a=new google.maps.LatLng(47.555012,7.5886962),s=new google.maps.Map(document.querySelector(".mapWrapper"),{zoom:17,center:a}),t=new google.maps.InfoWindow,i=new google.maps.places.PlacesService(s),n="ch"===window.domainName.name.split(".")[window.domainName.name.split(".").length-1]?"ChIJ6Woipq25kUcRoqB8dyvAvKA":"ChIJxwhr9H6xkUcRzxmAyoHLx8k";i.getDetails({placeId:n},(function(a,i){s.setCenter(a.geometry.location);let r=new google.maps.Marker({map:s,place:{placeId:n,location:a.geometry.location}});r.setVisible(!1);let o=a.rating/5*100+"%",l="";a.rating&&(l='<b style="color:#02ca95">'.concat(a.rating,'&nbsp;</b>\n                                    <div class="back-stars">\n                                        <i class="fa fa-star active" aria-hidden="true"></i>\n                                        <i class="fa fa-star active" aria-hidden="true"></i>\n                                        <i class="fa fa-star active" aria-hidden="true"></i>\n                                        <i class="fa fa-star active" aria-hidden="true"></i>\n                                        <i class="fa fa-star active" aria-hidden="true"></i>\n                                        <div class="front-stars" style="width: ').concat(o,'">\n                                            <i class="fa fa-star" aria-hidden="true"></i>\n                                            <i class="fa fa-star" aria-hidden="true"></i>\n                                            <i class="fa fa-star" aria-hidden="true"></i>\n                                            <i class="fa fa-star" aria-hidden="true"></i>\n                                            <i class="fa fa-star" aria-hidden="true"></i>\n                                        </div>\n                                    </div>'));let c='<div class="map-info-block">\n                            <p><b>'.concat(a.name,"</b></p>\n                            <p>").concat(a.adr_address.replace(/,/g,""),"</p>\n                            ").concat(l,"\n                           </div>");t.setContent(c),t.open(s,r);new e(a.geometry.location,s,{})}))}render(){let{totalPrice:e,model:a,totalTime:s}=this.props,{captcha:t,errors:i,formData:n,formWasSubmited:r}=this.state,o="remarket.ch"===window.domainName.name?"ch":"de";return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"delivery-book form-send-delivery-book",children:[!r&&(0,m.jsxs)("div",{className:"price",children:[(0,m.jsx)("h3",{className:"title",children:"price"}),(0,m.jsxs)("p",{className:"value",children:[e," ",window.currencyValue]})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("form",{name:"contactData",onSubmit:this.sendForm,children:[r&&(0,m.jsxs)("div",{className:"col-md-4 col-sm-6",children:[(0,m.jsx)("img",{loading:"lazy",className:"form-send-device-photo",src:"",alt:""}),(0,m.jsx)("h3",{className:"form-send-thanks",children:"Thank you!"}),(0,m.jsx)("p",{className:"form-send-thanks__content",children:"I'm glad I can help you estimate the repair price of your device. Book appintment"}),(0,m.jsxs)("section",{className:"form-send-devise",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"form-send-devise__model",children:a.title}),(0,m.jsxs)("p",{className:"form-send-devise__color",children:[(0,m.jsx)("span",{className:"form-send-devise__color_".concat(n.colorValue&&n.colorValue.id),style:{background:"".concat(n.colorValue.code),width:"15px",height:"15px",display:"inleneBlock",borderRadius:"50%"}}),"\xa0",(0,m.jsxs)("span",{className:"form-send-devise__description",children:[n.colorValue.value,", 32 GB"]})]})]}),(0,m.jsxs)("div",{className:"form-send-devise__price",children:[e,window.currencyValue]})]}),(0,m.jsxs)("p",{className:"form-send__duration",children:["Duration:\xa0",s.toFixed(2)," ",+s.toFixed(0)>0&&1===+s.toFixed(0)?(0,m.jsx)("span",{children:"hour"}):(0,m.jsx)("span",{children:"hours"})]})]}),(0,m.jsxs)("div",{className:r?"col-md-4 col-sm-6 calendar":"col-md-4 col-sm-6 item-column calendar",children:[(0,m.jsxs)("div",{children:[r?(0,m.jsx)("p",{className:"form-send__title",children:"Add apointment"}):(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"1"}),"Datum und Uhrzeit ausw\xe4hlen"]}),(0,m.jsx)("input",{type:"text",id:"datetimepicker"}),r?(0,m.jsxs)("button",{className:"btn form-send__btn",type:"submit",children:[(0,m.jsx)("p",{children:"Book apointment"}),(0,m.jsx)("p",{className:"form-send__btn-arrow",children:"\u2192"})]}):""]}),(0,m.jsx)("div",{className:"input-row",children:i.datetime&&(0,m.jsx)("p",{className:"info error",children:i.datetime})})]}),!r&&(0,m.jsx)("div",{className:"col-md-4 col-sm-6 item-column",children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"2"}),"Kontaktdaten eintragen"]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:n.firstName,onChange:this.handlerChangeInput,name:"firstName",required:!0,placeholder:"Vorname"}),i.firstName&&(0,m.jsx)("p",{className:"info error",children:i.firstName})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"text",value:n.lastName,onChange:this.handlerChangeInput,name:"lastName",required:!0,placeholder:"Nachname"}),i.lastName&&(0,m.jsx)("p",{className:"info error",children:i.lastName})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)(P(),{inputProps:{name:"phone_number",required:!0},pattern:"(\\+?\\d){11,}",value:n.phone,onChange:this.changePhoneNumber,defaultCountry:o,autoFormat:!1,placeholder:"Ihre Mobiltelefonnummer",flagsImagePath:"/images/design/flags.png"}),i.phone&&(0,m.jsx)("p",{className:"info error",children:i.phone})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("input",{type:"email",value:n.email,onChange:this.handlerChangeInput,name:"email",required:!0,placeholder:"E-Mail"}),i.email&&(0,m.jsx)("p",{className:"info error",children:i.email})]}),(0,m.jsxs)("div",{className:"select",children:[(0,m.jsx)(l.ZP,{placeholder:"Bitte w\xe4hlen Sie Farbe Ihres Ger\xe4tes aus",value:n.colorValue,name:"colorCode",clearable:!1,options:a.colors,searchable:!1,required:!0,valueKey:"id",labelKey:"value",valueRenderer:this.mapColorOptionSelected.bind(this),optionRenderer:this.mapColorOption.bind(this),onChange:this.changeColor}),i.colorId&&(0,m.jsx)("p",{className:"info error",children:i.colorId})]})]})}),!r&&(0,m.jsx)("div",{className:"col-md-4 col-sm-6 item-column",children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"title",children:[(0,m.jsx)("span",{className:"num",children:"3"}),"Termin best\xe4tigen"]}),(0,m.jsx)("p",{children:"Bitte kontrollieren Sie nochmals alle Angaben und best\xe4tigen Sie den Termin."}),(0,m.jsx)(w(),{sitekey:window.captchaSitekey.key,render:"explicit",hl:"de",verifyCallback:this.verifyCaptchaCallback,onloadCallback:()=>!1}),t.errorCaptcha&&(0,m.jsx)("p",{style:{color:"red"},children:"Bitte best\xe4tigen Sie, dass Sie kein Roboter sind."}),(0,m.jsx)("button",{className:"btn send",type:"submit",children:"Jetzt Termin reservierendasdas"})]})}),r&&(0,m.jsx)("div",{className:"col-md-4 col-sm-6 item-column",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"form-send__title-address",children:"Adressess"}),(0,m.jsxs)("p",{className:"form-send__address",children:["IRepartur.ch ",(0,m.jsx)("br",{})," Gerbergasse 82 ",(0,m.jsx)("br",{})," CH-4001 Basel"]}),(0,m.jsx)("h3",{className:"form-send__title",children:"Ofnungszeiten Basel"}),(0,m.jsxs)("div",{className:"form-send-container form-send__address",children:[(0,m.jsx)("span",{children:"Mo-Fr:"}),(0,m.jsx)("span",{children:"09:00 - 18.30 Uhr"})]}),(0,m.jsxs)("div",{className:"form-send-container form-send__address",children:[(0,m.jsx)("span",{children:"Sa:"}),(0,m.jsx)("span",{children:"10:00 - 18.00 Uhr"})]}),(0,m.jsxs)("div",{className:"form-send-contucts",children:[(0,m.jsx)("h3",{className:"form-send-contucts__title",children:"E-mail"}),(0,m.jsxs)("p",{className:"form-send-contucts__mail",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/repair-icons/mail.svg",alt:""}),(0,m.jsx)("span",{children:"basel@irepartur.ch"})]}),(0,m.jsx)("h3",{className:"form-send-contucts__title",children:"Telephone"}),(0,m.jsx)("p",{className:"form-send-contucts__mail",children:"061 511 22 42"})]})]})})]})}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:r?"mapWrapper form-send_active":"mapWrapper form-send_none"}),(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsx)("p",{className:"info-block",children:"Gerne k\xf6nnen Sie Ihr Ger\xe4t spontan w\xe4hrend unseren \xd6ffnungszeiten f\xfcr die Reparatur vorbeibringen und direkt auf das reparierte Ger\xe4t warten!"})})]})]})})}}function _(){let e=0;$(".item-column").each((function(){$("div",this).height()>e&&(e=$("div",this).height())})).height(e)}function L(){if($(".xdsoft_time_variant").height()<$(".xdsoft_timepicker").height()){let e=$(".xdsoft_timepicker").height()-$(".xdsoft_time_variant").height();e-96>0&&$(".xdsoft_time_variant").css({marginTop:e/2-24+"px"})}}const I=(0,o.$j)((function(e){return{user:e.user}}))(R);class M extends t.Component{constructor(e){super(e),this.state={activeNavItem:""},this.clickNavItem=this.clickNavItem.bind(this),this.mapNotice=this.mapNotice.bind(this)}componentDidMount(){$("html, body").animate({scrollTop:$(".select-device.repair-list-part").offset().top-90},600)}componentWillMount(){window.recaptchaOptions={lang:"de"}}componentWillReceiveProps(e){}clickNavItem(e){let a=e.currentTarget.getAttribute("data-type");this.setState({activeNavItem:a})}mapNotice(e){if(e.notice)return(0,m.jsx)("li",{children:e.notice},e.shortcode)}render(){let{activeNavItem:e}=this.state,{totalPrice:a,selectedRepairOptions:s,model:t,basketActions:i,totalTime:n}=this.props,r=s.some((e=>e.notice));return(0,m.jsx)("div",{className:"delivery-form animated fadeIn",children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("div",{className:"col-md-12",children:[(0,m.jsx)("p",{className:"title",children:"Wie wollen Sie die Reparatur durchf\xfchren lassen?"}),(0,m.jsxs)("div",{className:"navigation",children:[(0,m.jsxs)("div",{className:"book"===e?"item-navigation active":"item-navigation","data-type":"book",onClick:this.clickNavItem,children:[(0,m.jsxs)("div",{className:"image",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-1.png",alt:""}),(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-1-active.png",alt:""})]}),(0,m.jsx)("p",{className:"title",children:"Termin buchen"}),(0,m.jsx)("p",{className:"descr",children:"Ladenlokal besuchen"})]}),(0,m.jsxs)("div",{className:"bicycle"===e?"item-navigation active":"item-navigation","data-type":"bicycle",onClick:this.clickNavItem,children:[(0,m.jsxs)("div",{className:"image",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-2.png",alt:""}),(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-2-active.png",alt:""})]}),(0,m.jsx)("p",{className:"title",children:"Per Velokurier"}),(0,m.jsx)("p",{className:"descr",children:"Dauer Versand: ca. 2 Stunden (hin- und zur\xfcck)"})]}),(0,m.jsxs)("div",{className:"post"===e?"item-navigation active":"item-navigation","data-type":"post",onClick:this.clickNavItem,children:[(0,m.jsxs)("div",{className:"image",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-3.png",alt:""}),(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-3-active.png",alt:""})]}),(0,m.jsx)("p",{className:"title",children:"Per Postversand"}),(0,m.jsx)("p",{className:"descr",children:"Dauer Versand: ca. 2-3 Tage"})]}),(0,m.jsxs)("div",{className:"recommend"===e?"item-navigation active":"item-navigation","data-type":"recommend",onClick:this.clickNavItem,children:[(0,m.jsxs)("div",{className:"image",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-4.png",alt:""}),(0,m.jsx)("img",{loading:"lazy",src:"/images/design/repair-delivery-nav-icon-4-active.png",alt:""})]}),(0,m.jsx)("p",{className:"title",children:"Freund empfehlen"}),(0,m.jsx)("p",{className:"descr",children:"E-Mail, Whatsapp, etc."})]})]})]})}),"post"===e&&(0,m.jsx)(y,{totalPrice:a,model:t}),"bicycle"===e&&(0,m.jsx)(k,{totalPrice:a,model:t}),"book"===e&&(0,m.jsx)(I,{model:t,totalTime:n,basketActions:i,selectedRepairOptions:s,totalPrice:a}),r&&(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("div",{className:"notice-block",children:[(0,m.jsxs)("p",{className:"head-title",children:[(0,m.jsx)("img",{loading:"lazy",src:"/images/design/warning.png",alt:""}),(0,m.jsx)("b",{children:"Wichtiger Hinweis:"})," Bei Ihrer Reparatur gibt es folgendes zu beachten:"]}),(0,m.jsx)("ul",{children:s.map(this.mapNotice)})]})})})]})})}}const F=M;class D extends t.Component{constructor(e){super(e),this.state={repairList:[],model:{id:null,frontImage:null,backImage:null,title:null},isPhonePositionFront:!0,selectedRepairOptions:[],totalPrice:0,totalTime:0},this.getRepairsList=this.getRepairsList.bind(this),this.mapRepairList=this.mapRepairList.bind(this),this.rotatePhone=this.rotatePhone.bind(this),this.wrapRepairOptionsInRow=this.wrapRepairOptionsInRow.bind(this),this.chooseRepairOption=this.chooseRepairOption.bind(this),this.mapOptionsOnPhone=this.mapOptionsOnPhone.bind(this),this.calculatePriceAndTime=this.calculatePriceAndTime.bind(this)}componentDidMount(){this.getRepairsList()}componentWillReceiveProps(e){e.params.model!==this.props.params.model&&this.getRepairsList(e.params.model),e.selectedRepairOptions!==this.props.selectedRepairOptions&&this.calculatePriceAndTime(e.selectedRepairOptions)}mapOptionsOnPhone(e,a,s){let t={position:"absolute",margin:"".concat(a.positionY,"px 0 0 ").concat(a.positionX,"px")},i="",{selectedRepairOptions:n}=this.props;return n.some((e=>e.shortcode==a.shortcode))&&(i="active"),a.isBackPosition&&"back"===e?(0,m.jsxs)("div",{className:"item-option",style:t,children:[(0,m.jsx)("label",{htmlFor:"option-".concat(a.shortcode),className:i}),(0,m.jsx)("span",{className:"title",children:a.title})]},s):a.isBackPosition||"front"!==e?void 0:(0,m.jsxs)("div",{className:"item-option",style:t,children:[(0,m.jsx)("label",{htmlFor:"option-".concat(a.shortcode),className:i}),(0,m.jsx)("span",{className:"title",children:a.title})]},s)}wrapRepairOptionsInRow(){return this.state.repairList.map(this.mapRepairList).reduce(((e,a,s)=>(s%2===0&&e.push([]),e[e.length-1].push(a),e)),[]).map(((e,a)=>(0,m.jsx)("div",{className:"row",children:e},a)))}getRepairsList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.params.model,a=e.slice(e.lastIndexOf("-")+1);document.getElementById("spinner-box-load").style.display="block",axios.get("/api/getModelRepairList?modelId=".concat(a)).then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({repairList:e.data.repairList,model:e.data.model}),window.scrollTo(0,document.querySelector(".select-device").offsetTop-110)}))}mapRepairList(e,a){let{selectedRepairOptions:s}=this.props,t=0,i=e.priceMax,n=window.domainName.name.split(".")[window.domainName.name.split(".").length-1];if(s.forEach((e=>{+e.priceMax>t&&(t=+e.priceMax)})),s.length>0)if(t>+e.priceMax)i=e.minPrice;else if(t==+e.priceMax){i=this.state.repairList.find((e=>+e.priceMax==t&&s.some((a=>a.shortcode==e.shortcode)))).shortcode==e.shortcode?e.priceMax:e.minPrice}return(0,m.jsx)("div",{className:"col-sm-6",children:(0,m.jsxs)("label",{className:"item-repair-option",children:[(0,m.jsxs)("div",{className:"left",children:[(0,m.jsx)("input",{type:"checkbox",id:"option-".concat(e.shortcode),checked:s.some((a=>a.shortcode===e.shortcode)),onChange:()=>this.chooseRepairOption(e)}),(0,m.jsx)("span",{}),(0,m.jsx)("div",{className:"image",children:(0,m.jsx)("img",{loading:"lazy",src:e.icon||"https://www.ireparatur.ch/images/repair-icons/battery.png",alt:""})}),(0,m.jsx)("span",{className:"name",children:e.title})]}),(0,m.jsx)("div",{className:"right",children:(0,m.jsxs)("span",{className:"price",children:[i," ","ch"===n?"CHF":"EUR"]})})]})},a)}chooseRepairOption(e){let a=[...this.props.selectedRepairOptions];a.some((a=>a.shortcode===e.shortcode))?a=a.filter((a=>a.shortcode!==e.shortcode)):a.push(e),this.props.basketActions.changeBasketDataRepair(a)}calculatePriceAndTime(e){let a=0,s=0,t=0,i=0;e.forEach((e=>{+e.priceMax>=a&&(a=+e.priceMax),+e.timeMax>=s&&(s=+e.timeMax)})),this.state.repairList.forEach((n=>{e.some((e=>n.shortcode===e.shortcode))&&(+n.priceMax==a?(t+=+n.priceMax,a=null):t+=+n.minPrice,+n.timeMax==s?(i+=+n.timeMax,s=null):i+=+n.timeMin)})),i/=3600,this.setState({totalPrice:t,totalTime:i})}rotatePhone(){this.setState({isPhonePositionFront:!this.state.isPhonePositionFront})}render(){let{model:e,repairList:a,isPhonePositionFront:s,totalPrice:t,totalTime:i}=this.state,{selectedRepairOptions:n,basketActions:r}=this.props;return(0,m.jsxs)("section",{className:"select-device repair-list-part",children:[(0,m.jsx)("p",{className:"title",children:"Reparatur ausw\xe4hlen und Preis berechnen"}),n.length>0&&(0,m.jsx)(F,{selectedRepairOptions:n,basketActions:r,model:e,totalTime:i,totalPrice:t}),(0,m.jsx)("div",{className:"container",children:(0,m.jsx)("div",{className:"wrap-repair-list",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4 text-center",children:[(0,m.jsx)("p",{className:"title",style:{maxWidth:"270px"},children:e.title}),(0,m.jsxs)("div",{className:s?"phone-model":"phone-model flipped",children:[(0,m.jsxs)("div",{className:"model front",children:[a.map(this.mapOptionsOnPhone.bind(this,"front")),(0,m.jsx)("img",{loading:"lazy",src:e.frontImage||"https://www.ireparatur.ch/images/model-outline/iphone7-front.png",alt:""})]}),(0,m.jsxs)("div",{className:"model back",children:[a.map(this.mapOptionsOnPhone.bind(this,"back")),(0,m.jsx)("img",{loading:"lazy",src:e.backImage||"https://www.ireparatur.ch/images/model-outline/iphone7-back.png",alt:""})]})]}),(0,m.jsx)("div",{style:{maxWidth:"270px"},className:"buttons",children:(0,m.jsx)("div",{className:"btn-rotate",onClick:this.rotatePhone,children:"Ger\xe4t umdrehen"})})]}),(0,m.jsx)("div",{className:"col-md-8",children:(0,m.jsxs)("div",{className:"repair-options",children:[n.length>0&&(0,m.jsxs)("p",{className:"result",children:["Sehr gut, diese Reparatur / Dienstleistung k\xf6nnen wir durchf\xfchren und ist (vor Ort) in ca.",(0,m.jsxs)("span",{children:[" ",Math.round(100*+i)/100]})," Stunden f\xfcr",(0,m.jsxs)("span",{children:[" ",Math.round(100*+t)/100]})," ",window.currencyValue," erledigt"]}),(0,m.jsx)("p",{className:"title",children:"W\xe4hlen Sie aus der Reparatur-Liste (unten) den Fehler auf Ihrem Ger\xe4t, oder direkt auf dem Ger\xe4t (links)."}),this.wrapRepairOptionsInRow()]})})]})})}),(0,m.jsx)("div",{className:"bottom-info",children:(0,m.jsx)("div",{className:"container",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-xs-12",children:(0,m.jsx)("p",{children:"The technical specifications of the iPhone 7 Plus are based on the basic version iPhone 7, but differ in some points. Thus, the screen diagonal of 5.5 inches is slightly larger and the resolution of 1920 x 1080 pixels corresponds to the full HD standard. The device has 3 gigabytes of RAM and also has a higher battery capacity of about 2.900 mAh, which allows up to 384 hours in standby mode. The experts at iReparatur.ch in Basel know the technical features of the iPhone 7 Plus from Apple and offer a wide range of repairs. From the typical iPhone 7 plus glass defect through the silent switch and the battery to the back or front camera, the specialists are familiar with the typical weak points of the device and gladly repair your iPhone 7 Plus. In our branch in the heart of Basel, you can easily preview your iPhone 7 Plus without any appointment agreement."})})})})})]})}}const T=(0,o.$j)((function(e){return{selectedRepairOptions:e.basket.basketDataRepair.selectedOptions,shippingMethod:e.basket.basketDataRepair.shippingMethod}}),(function(e){return{basketActions:(0,c.DE)(d,e)}}),null,{pure:!1})(D)},2306:(e,a,s)=>{var t=s(5510),i=/^\s+/;e.exports=function(e){return e?e.slice(0,t(e)+1).replace(i,""):e}},5510:e=>{var a=/\s/;e.exports=function(e){for(var s=e.length;s--&&a.test(e.charAt(s)););return s}},12279:(e,a,s)=>{var t=s(91845),i=s(46170),n=s(57923),r=Math.max,o=Math.min;e.exports=function(e,a,s){var l,c,d,h,p,m,u=0,g=!1,x=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(a){var s=l,t=c;return l=c=void 0,u=a,h=e.apply(t,s)}function j(e){var s=e-m;return void 0===m||s>=a||s<0||x&&e-u>=d}function v(){var e=i();if(j(e))return b(e);p=setTimeout(v,function(e){var s=a-(e-m);return x?o(s,d-(e-u)):s}(e))}function b(e){return p=void 0,f&&l?y(e):(l=c=void 0,h)}function N(){var e=i(),s=j(e);if(l=arguments,c=this,m=e,s){if(void 0===p)return function(e){return u=e,p=setTimeout(v,a),g?y(e):h}(m);if(x)return clearTimeout(p),p=setTimeout(v,a),y(m)}return void 0===p&&(p=setTimeout(v,a)),h}return a=n(a)||0,t(s)&&(g=!!s.leading,d=(x="maxWait"in s)?r(n(s.maxWait)||0,a):d,f="trailing"in s?!!s.trailing:f),N.cancel=function(){void 0!==p&&clearTimeout(p),u=0,l=m=c=p=void 0},N.flush=function(){return void 0===p?h:b(i())},N}},91845:e=>{e.exports=function(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)}},72060:(e,a,s)=>{var t=s(18665),i=s(89752);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==t(e)}},46170:(e,a,s)=>{var t=s(7289);e.exports=function(){return t.Date.now()}},57923:(e,a,s)=>{var t=s(2306),i=s(91845),n=s(72060),r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(i(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=i(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=t(e);var s=o.test(e);return s||l.test(e)?c(e.slice(2),s?2:8):r.test(e)?NaN:+e}},89850:function(e,a,s){var t;e.exports=(t=s(47313),function(e){function a(t){if(s[t])return s[t].exports;var i=s[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var s={};return a.m=e,a.c=s,a.p="",a(0)}([function(e,a,s){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function i(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function n(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function r(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,s,t){return s&&e(a.prototype,s),t&&e(a,t),a}}(),l=s(6),c=t(l),d=t(s(4)),h={className:d.default.string,onloadCallbackName:d.default.string,elementID:d.default.string,onloadCallback:d.default.func,verifyCallback:d.default.func,expiredCallback:d.default.func,render:d.default.oneOf(["onload","explicit"]),sitekey:d.default.string,theme:d.default.oneOf(["light","dark"]),type:d.default.string,verifyCallbackName:d.default.string,expiredCallbackName:d.default.string,size:d.default.oneOf(["invisible","compact","normal"]),tabindex:d.default.string,hl:d.default.string,badge:d.default.oneOf(["bottomright","bottomleft","inline"])},p={elementID:"g-recaptcha",className:"g-recaptcha",onloadCallback:void 0,onloadCallbackName:"onloadCallback",verifyCallback:void 0,verifyCallbackName:"verifyCallback",expiredCallback:void 0,expiredCallbackName:"expiredCallback",render:"onload",theme:"light",type:"image",size:"normal",tabindex:"0",hl:"en",badge:"bottomright"},m=function(){return"undefined"!=typeof window&&"undefined"!=typeof window.grecaptcha&&"function"==typeof window.grecaptcha.render},u=void 0,g=function(e){function a(e){i(this,a);var s=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return s._renderGrecaptcha=s._renderGrecaptcha.bind(s),s.reset=s.reset.bind(s),s.state={ready:m(),widget:null},s.state.ready||"undefined"==typeof window||(u=setInterval(s._updateReadyState.bind(s),1e3)),s}return r(a,e),o(a,[{key:"componentDidMount",value:function(){this.state.ready&&this._renderGrecaptcha()}},{key:"componentDidUpdate",value:function(e,a){var s=this.props,t=s.render,i=s.onloadCallback;"explicit"===t&&i&&this.state.ready&&!a.ready&&this._renderGrecaptcha()}},{key:"componentWillUnmount",value:function(){clearInterval(u)}},{key:"reset",value:function(){var e=this.state,a=e.ready,s=e.widget;a&&null!==s&&grecaptcha.reset(s)}},{key:"execute",value:function(){var e=this.state,a=e.ready,s=e.widget;a&&null!==s&&grecaptcha.execute(s)}},{key:"_updateReadyState",value:function(){m()&&(this.setState({ready:!0}),clearInterval(u))}},{key:"_renderGrecaptcha",value:function(){this.state.widget=grecaptcha.render(this.props.elementID,{sitekey:this.props.sitekey,callback:this.props.verifyCallback?this.props.verifyCallback:void 0,theme:this.props.theme,type:this.props.type,size:this.props.size,tabindex:this.props.tabindex,hl:this.props.hl,badge:this.props.badge,"expired-callback":this.props.expiredCallback?this.props.expiredCallback:void 0}),this.props.onloadCallback&&this.props.onloadCallback()}},{key:"render",value:function(){return"explicit"===this.props.render&&this.props.onloadCallback?c.default.createElement("div",{id:this.props.elementID,"data-onloadcallbackname":this.props.onloadCallbackName,"data-verifycallbackname":this.props.verifyCallbackName}):c.default.createElement("div",{id:this.props.elementID,className:this.props.className,"data-sitekey":this.props.sitekey,"data-theme":this.props.theme,"data-type":this.props.type,"data-size":this.props.size,"data-badge":this.props.badge,"data-tabindex":this.props.tabindex})}}]),a}(l.Component);a.default=g,g.propTypes=h,g.defaultProps=p,e.exports=a.default},function(e,a){"use strict";function s(e){return function(){return e}}var t=function(){};t.thatReturns=s,t.thatReturnsFalse=s(!1),t.thatReturnsTrue=s(!0),t.thatReturnsNull=s(null),t.thatReturnsThis=function(){return this},t.thatReturnsArgument=function(e){return e},e.exports=t},function(e,a,s){"use strict";function t(e,a,s,t,n,r,o,l){if(i(a),!e){var c;if(void 0===a)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,t,n,r,o,l],h=0;(c=new Error(a.replace(/%s/g,(function(){return d[h++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(e){};e.exports=t},function(e,a,s){"use strict";var t=s(1),i=s(2),n=s(5);e.exports=function(){function e(e,a,s,t,r,o){o!==n&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function a(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a};return s.checkPropTypes=t,s.PropTypes=s,s}},function(e,a,s){e.exports=s(3)()},function(e,a){"use strict";var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=s},function(e,a){e.exports=t}]))}}]);