"use strict";(self.webpackChunkassessment=self.webpackChunkassessment||[]).push([[2583],{75344:(e,s,n)=>{n.r(s),n.d(s,{EditUserProfile:()=>d,default:()=>m});var i=n(47313),t=n(72231),a=n(31881),r=n.n(a),l=n(39157),o=n(91066),c=n(78081),h=n(72905),p=n(76233),u=n(46417);class d extends i.Component{constructor(e){super(e),this.state={inputCheckbox:{shippingAddress:!0,shippingCompany:!1,customerCompany:!1,systemCompany:!1},country:{countriesList:[],currentCountry:{inputCountry:"CH",customer_inputCountry:"CH",system_inputCountry:"CH"}},isChanged:{LieferAnrede:!1,RechnungAnrede:!1,customerCompany:!1,shippingCompany:!1,LieferVorname:!1,LieferNachname:!1,RechnungNachname:!1,RechnungVorname:!1,LieferFirmenname:!1,RechnungFirmenname:!1,LieferTelefon:!1,RechnungTelefon:!1},successMsg:null},this._setFormFields=this._setFormFields.bind(this),this._showHideBlocks=this._showHideBlocks.bind(this),this.changeCheckbox=this.changeCheckbox.bind(this),this.changeCountry=this.changeCountry.bind(this),this.sendForm=this.sendForm.bind(this),this.clearForm=this.clearForm.bind(this),this.autocomleteFieldsShippingBilling=this.autocomleteFieldsShippingBilling.bind(this),this.changeShippingBillingForm=this.changeShippingBillingForm.bind(this)}componentWillReceiveProps(e){e.user.isLogin!==this.props.user.isLogin&&!1===e.user.isLogin&&t.mW.push("/")}componentDidMount(){this.setState({country:{...this.state.country,countriesList:[{value:"ch",label:"Schweiz"},{value:"li",label:"Liechtenstein"}]}}),window.isGoogleConnection&&o.o9.call(this,2),document.getElementById("spinner-box-load").style.display="block",r().get("/api/accountData").then((e=>{document.getElementById("spinner-box-load").style.display="none",this._setFormFields(e.data)})),window.isMobile&&this._showHideBlocks()}_showHideBlocks(){$("h3.title .toggle-forMobile").on("click",(function(){"none"===$(this).parents(".itemForm").find(".itemFormWrap").css("display")&&($(".itemFormWrap").each((function(){$(this).hide("slow"),$(this).parent().find(".title i.fa").removeClass("fa-minus").addClass("fa-plus")})),$(this).parents(".itemForm").find(".itemFormWrap").toggle("slow"),$(this).parents(".itemForm").find(".title i.fa").removeClass("fa-plus").addClass("fa-minus"))}))}_setFormFields(e){let s=document.forms.editUserProfileForm,{country:n,inputCheckbox:i}=this.state;for(let t in e)switch(t){case"company":e[t]?(i.systemCompany=!0,s[t].value=e[t]):(i.systemCompany=!1,s[t].value=e[t]);break;case"LieferFirmenname":e[t]?(i.shippingCompany=!0,s[t].value=e[t]):(i.shippingCompany=!1,s[t].value=e[t]);break;case"RechnungFirmenname":e[t]?(i.customerCompany=!0,s[t].value=e[t]):(i.customerCompany=!1,s[t].value=e[t]);break;case"Sprache":s[t]&&(s[t].value=e[t]),n.currentCountry.system_inputCountry=e[t];break;case"LieferLand":s[t]&&(s[t].value=e[t]),n.currentCountry.inputCountry=e[t];break;case"RechnungLand":s[t]&&(s[t].value=e[t]),n.currentCountry.customer_inputCountry=e[t];break;default:s[t]&&(s[t].value=e[t])}this.setState({inputCheckbox:i,country:n})}changeCheckbox(e){let{inputCheckbox:s}=this.state,{name:n}=e.target;e.target.getAttribute("data-show")?"true"===e.target.getAttribute("data-show")?s.shippingAddress=!1:s.shippingAddress=!0:s[n]=!s[n],this.setState({inputCheckbox:s})}changeCountry(e,s){let{value:n}=e,{currentCountry:i}=this.state.country,t="";switch(s){case"Sprache":t="system_inputCountry";break;case"LieferLand":t="inputCountry";break;case"RechnungLand":t="customer_inputCountry"}i[t]=n,this.setState({country:{...this.state.country,currentCountry:i}})}sendForm(e){e.preventDefault();let s=new FormData(document.forms.editUserProfileForm);document.getElementById("spinner-box-load").style.display="block",r().post("/api/updateAccount",s).then((e=>{document.getElementById("spinner-box-load").style.display="none",this.setState({successMsg:e.data}),r().get("/api/customerAgileData").then((e=>{200===e.status&&this.props.loginSuccess(e.data)}))}))}cancelSendByEnter(e){if("Enter"===e.key)return e.preventDefault(),!1}clearForm(e){e.preventDefault();let s=[...document.querySelectorAll(".editUserProfileForm input:not([type=radio])")],n=[...document.querySelectorAll(".editUserProfileForm input[type=radio]")];s.forEach((e=>{e.value=""})),n.forEach((e=>{"shippingAddress"!==e.name&&(e.checked=!1)})),this.setState({inputCheckbox:{...this.state.inputCheckbox,shippingCompany:!1,customerCompany:!1,systemCompany:!1}})}autocomleteFieldsShippingBilling(e){let s=document.forms.editUserProfileForm,{name:n,value:i}=e.target,{isChanged:t,inputCheckbox:a}=this.state;switch(n){case"Geschlecht":t.LieferAnrede||(s.LieferAnrede.value=i),t.RechnungAnrede||(s.RechnungAnrede.value=i);break;case"systemCompany":t.customerCompany||(a.customerCompany=e.target.checked),t.shippingCompany||(a.shippingCompany=e.target.checked),this.setState({inputCheckbox:a});break;case"first_name":t.LieferVorname||(s.LieferVorname.value=i),t.RechnungVorname||(s.RechnungVorname.value=i);break;case"last_name":t.LieferNachname||(s.LieferNachname.value=i),t.RechnungNachname||(s.RechnungNachname.value=i);break;case"company":t.LieferFirmenname||(s.LieferFirmenname.value=i),t.RechnungFirmenname||(s.RechnungFirmenname.value=i);break;case"TelefonAlternativErreichbar":t.LieferTelefon||(s.LieferTelefon.value=i),t.RechnungTelefon||(s.RechnungTelefon.value=i)}}changeShippingBillingForm(e){let{name:s}=e.target,{isChanged:n}=this.state;n[s]=!0,this.setState({isChanged:n})}render(){let{inputCheckbox:e,country:s}=this.state;return(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"editFormWrap clearfix",children:[(0,u.jsx)("p",{className:"successUpd",children:this.state.successMsg}),(0,u.jsxs)("form",{name:"editUserProfileForm",className:"editUserProfileForm",onSubmit:this.sendForm,onKeyPress:this.cancelSendByEnter.bind(this),children:[(0,u.jsxs)("div",{className:"col-md-12 topRow",children:[(0,u.jsx)("span",{className:"title",children:"Profil bearbeiten"}),(0,u.jsx)("div",{className:"buttons",children:(0,u.jsx)("button",{type:"submit",className:"basketSubmit btn",children:"Daten aktualisieren"})})]}),(0,u.jsxs)("div",{className:"wrapItemForm",children:[(0,u.jsx)("div",{className:"col-md-4",children:(0,u.jsxs)("div",{className:"itemForm",children:[(0,u.jsxs)("h3",{className:"title",children:["Allgemeine Information",(0,u.jsx)("i",{className:"fa fa-minus toggle-forMobile"})]}),(0,u.jsxs)("div",{className:"itemFormWrap",children:[(0,u.jsx)("div",{className:"image",children:this.props.user.data&&this.props.user.data.systemAddress&&this.props.user.data.systemAddress.first_name&&this.props.user.data.systemAddress.last_name&&this.props.user.data.systemAddress.first_name.slice(0,1).toUpperCase()+this.props.user.data.systemAddress.last_name.slice(0,1).toUpperCase()}),(0,u.jsxs)("div",{className:"topPersonalData",children:[(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"Geschlecht",value:"Herr",onChange:this.autocomleteFieldsShippingBilling,required:!0}),(0,u.jsx)("span",{}),"Herr"]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"Geschlecht",value:"Frau",onChange:this.autocomleteFieldsShippingBilling}),(0,u.jsx)("span",{}),"Frau"]})]}),(0,u.jsxs)("div",{className:"personalDataInputHalf",children:[(0,u.jsx)("input",{type:"text",name:"first_name",placeholder:"Vorname",onChange:this.autocomleteFieldsShippingBilling,required:!0}),(0,u.jsx)("input",{type:"text",name:"last_name",placeholder:"Nachname",onChange:this.autocomleteFieldsShippingBilling,required:!0})]}),(0,u.jsx)("div",{className:"inputFullWidth",children:(0,u.jsx)("input",{type:"email",name:"email",placeholder:"E-Mail",required:!0})}),(0,u.jsx)("div",{className:"inputFullWidth",children:(0,u.jsx)("input",{type:"text",name:"phone",placeholder:"Telefon (mobil)",required:!0})}),(0,u.jsx)("div",{className:"inputFullWidth",children:(0,u.jsx)("input",{type:"text",name:"IBAN",placeholder:"IBAN",minLength:"21",maxLength:"34"})}),!s.countriesList.some((e=>e.value===s.currentCountry.system_inputCountry.toLowerCase()))&&(0,u.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,u.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.currentCountry.system_inputCountry.toLowerCase(),name:"Sprache",clearable:!1,options:s.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"Sprache")}),(0,u.jsxs)("label",{onChange:this.autocomleteFieldsShippingBilling,className:"labelCompany",children:[(0,u.jsx)("input",{type:"checkbox",value:e.systemCompany,name:"systemCompany",checked:e.systemCompany,onChange:this.changeCheckbox}),(0,u.jsx)("span",{className:"check"}),(0,u.jsx)("span",{className:"text",children:"Firma"})]}),(0,u.jsx)("div",{className:e.systemCompany?"inputFullWidth":"inputFullWidth hide",children:(0,u.jsx)("input",{type:"text",name:"company",placeholder:"Firma",onChange:this.autocomleteFieldsShippingBilling,required:e.systemCompany})}),(0,u.jsx)("div",{className:e.systemCompany?"inputFullWidth":"inputFullWidth hide",children:(0,u.jsx)("input",{type:"text",name:"vat",placeholder:"MwSt.-Nr."})})]})]})}),(0,u.jsx)("div",{className:"col-md-4",children:(0,u.jsxs)("div",{className:"itemForm",children:[(0,u.jsxs)("h3",{className:"title",children:["Rechnungsadresse",(0,u.jsx)("i",{className:"fa fa-plus toggle-forMobile"})]}),(0,u.jsxs)("div",{className:"itemFormWrap",children:[(0,u.jsxs)("div",{className:"topPersonalData",children:[(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"RechnungAnrede",value:"Herr",onChange:this.changeShippingBillingForm,required:!0}),(0,u.jsx)("span",{}),"Herr"]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"RechnungAnrede",value:"Frau",onChange:this.changeShippingBillingForm,required:!0}),(0,u.jsx)("span",{}),"Frau"]})]}),(0,u.jsxs)("div",{className:"personalDataInputHalf",children:[(0,u.jsx)("input",{type:"text",name:"RechnungVorname",placeholder:"Vorname",onChange:this.changeShippingBillingForm,required:!0}),(0,u.jsx)("input",{type:"text",name:"RechnungNachname",placeholder:"Nachname",onChange:this.changeShippingBillingForm,required:!0})]}),(0,u.jsx)("div",{className:"inputFullWidth street",children:(0,u.jsx)("input",{type:"text",name:"RechnungStrasse",id:"customer_route",placeholder:"Adresse",required:!0})}),(0,u.jsx)("div",{className:"personalDataInputHalf",children:(0,u.jsx)("input",{type:"text",name:"RechnungHausnummer",id:"customer_street_number",placeholder:"Nr.",required:!0})}),(0,u.jsxs)("div",{className:"personalDataInputHalf",children:[(0,u.jsx)("input",{type:"text",name:"RechnungPLZ",placeholder:"PLZ",id:"customer_postal_code",required:!0}),(0,u.jsx)("input",{type:"text",name:"RechnungStadt",placeholder:"Stadt",id:"customer_locality",required:!0})]}),!s.countriesList.some((e=>e.value===s.currentCountry.customer_inputCountry.toLowerCase()))&&(0,u.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,u.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.currentCountry.customer_inputCountry.toLowerCase(),name:"RechnungLand",clearable:!1,options:s.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"RechnungLand")}),(0,u.jsx)("div",{className:"inputFullWidth",children:(0,u.jsx)("input",{type:"text",name:"RechnungTelefon",placeholder:"Telefon",onChange:this.changeShippingBillingForm,required:!0})}),(0,u.jsxs)("label",{onChange:this.changeShippingBillingForm,className:"labelCompany",children:[(0,u.jsx)("input",{type:"checkbox",name:"customerCompany",value:e.customerCompany,checked:e.customerCompany,onClick:this.changeCheckbox}),(0,u.jsx)("span",{className:"check"}),(0,u.jsx)("span",{className:"text",children:"Firma"})]}),(0,u.jsx)("div",{className:e.customerCompany?"inputFullWidth":"inputFullWidth hide",children:(0,u.jsx)("input",{type:"text",name:"RechnungFirmenname",placeholder:"Firma",onChange:this.changeShippingBillingForm,required:e.customerCompany})}),(0,u.jsxs)("div",{className:"topPersonalData showBillingForm",children:[(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",value:"billing",name:"shippingAddress","data-show":"false",checked:e.shippingAddress,onChange:this.changeCheckbox}),(0,u.jsx)("span",{}),"Lieferadresse = Rechnungsadresse"]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",value:"custom",name:"shippingAddress","data-show":"true",checked:!e.shippingAddress,onChange:this.changeCheckbox}),(0,u.jsx)("span",{}),"Lieferadresse erstellen"]})})]})]})]})}),(0,u.jsx)("div",{className:!0===e.shippingAddress?"hide col-md-4":"col-md-4",children:(0,u.jsxs)("div",{className:"itemForm",children:[(0,u.jsxs)("h3",{className:"title",children:["Versandadresse",(0,u.jsx)("i",{className:"fa fa-plus toggle-forMobile"})]}),(0,u.jsxs)("div",{className:"itemFormWrap",children:[(0,u.jsxs)("div",{className:"topPersonalData",children:[(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"LieferAnrede",value:"Herr",onChange:this.changeShippingBillingForm,required:!e.shippingAddress}),(0,u.jsx)("span",{}),"Herr"]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"radio",name:"LieferAnrede",onChange:this.changeShippingBillingForm,value:"Frau",required:!e.shippingAddress}),(0,u.jsx)("span",{}),"Frau"]})]}),(0,u.jsxs)("div",{className:"personalDataInputHalf",children:[(0,u.jsx)("input",{type:"text",name:"LieferVorname",placeholder:"Vorname",onChange:this.changeShippingBillingForm,required:!e.shippingAddress}),(0,u.jsx)("input",{type:"text",name:"LieferNachname",placeholder:"Nachname",onChange:this.changeShippingBillingForm,required:!e.shippingAddress})]}),(0,u.jsx)("div",{className:"inputFullWidth street",children:(0,u.jsx)("input",{type:"text",name:"LieferStrasse",id:"route",placeholder:"Strasse",required:!e.shippingAddress})}),(0,u.jsx)("div",{className:"personalDataInputHalf",children:(0,u.jsx)("input",{type:"text",name:"LieferHausnummer",id:"street_number",placeholder:"Nr.",required:!e.shippingAddress})}),(0,u.jsxs)("div",{className:"personalDataInputHalf",children:[(0,u.jsx)("input",{type:"text",name:"LieferPLZ",placeholder:"PLZ",id:"postal_code",required:!e.shippingAddress}),(0,u.jsx)("input",{type:"text",name:"LieferStadt",placeholder:"Stadt",id:"locality",required:!e.shippingAddress})]}),!s.countriesList.some((e=>e.value===s.currentCountry.inputCountry.toLowerCase()))&&!0!==e.shippingAddress&&(0,u.jsx)("input",{className:"requiredSelect",type:"text",required:!0}),(0,u.jsx)(l.ZP,{placeholder:"Ausw\xe4hlen...",value:s.currentCountry.inputCountry.toLowerCase(),name:"LieferLand",clearable:!1,options:s.countriesList,searchable:!1,onChange:e=>this.changeCountry(e,"LieferLand")}),(0,u.jsx)("div",{className:"inputFullWidth phone",children:(0,u.jsx)("input",{type:"text",name:"LieferTelefon",placeholder:"Telefon",onChange:this.changeShippingBillingForm,required:!e.shippingAddress})}),(0,u.jsxs)("label",{onChange:this.changeShippingBillingForm,className:"labelCompany",children:[(0,u.jsx)("input",{type:"checkbox",value:e.shippingCompany,name:"shippingCompany",checked:e.shippingCompany,onChange:this.changeCheckbox}),(0,u.jsx)("span",{className:"check"}),(0,u.jsx)("span",{className:"text",children:"Firma"})]}),(0,u.jsx)("div",{className:e.shippingCompany?"inputFullWidth":"inputFullWidth hide",children:(0,u.jsx)("input",{type:"text",name:"LieferFirmenname",placeholder:"Firma",onChange:this.changeShippingBillingForm,required:e.shippingCompany})})]})]})})]})]})]})})})}}d.defaultProps={};const m=(0,c.$j)((function(e){return{user:e.user}}),(function(e){return{loginSuccess:(0,h.DE)(p.loginSuccess,e)}}))(d)}}]);