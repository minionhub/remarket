"use strict";(self.webpackChunkassessment=self.webpackChunkassessment||[]).push([[1016],{2010:(e,s,t)=>{t.r(s),t.d(s,{ThankYouPage:()=>h,default:()=>m});var i=t(47313),a=t(72231),c=t(31881),r=t.n(c),n=t(78081),l=t(72905),d=t(73815),o=t(76233),p=t(46417);class h extends i.Component{constructor(e){super(e),this.state={basketData:[],totalPrice:0,repairList:[],selectedOptions:[]},this.mapBasketItems=this.mapBasketItems.bind(this),this.mapBasketItemsDevices=this.mapBasketItemsDevices.bind(this),this.checkIsLogin=this.checkIsLogin.bind(this),this._getPrice=this._getPrice.bind(this)}componentDidMount(){let e=JSON.parse(window.localStorage.getItem("basketDataRepair")),s=0,t=[];document.getElementById("spinner-box-load").style.display="block",e?r().get("/api/getModelRepairList?modelId=".concat(e.modelId)).then((i=>{document.getElementById("spinner-box-load").style.display="none",s=this._getPrice(e.selectedOptions,i.data.repairList,e.shippingMethod),t=[...e.selectedOptions],e.shippingMethod&&e.selectedOptions.push(e.shippingMethod),e=e.selectedOptions,this.setState({basketData:e,selectedOptions:t,totalPrice:s,repairList:i.data.repairList})})):document.getElementById("spinner-box-load").style.display="none",window.localStorage.removeItem("basketDataRepair"),this.props.basketActions.changeBasketDataRepair([]),this.props.basketActions.changeShippingMethodRepair(null)}_getPrice(e,s,t){let i=0,a=0;return e.forEach((e=>{+e.priceMax>=i&&(i=+e.priceMax)})),s.forEach((s=>{e.some((e=>s.shortcode===e.shortcode))&&(+s.priceMax==i?(a+=+s.priceMax,i=null):a+=+s.minPrice)})),t&&(a+=+t.price),a}mapBasketItemsDevices(e,s){if(11!==e.productTypeId){let t=this.state.selectedOptions,i=0,a=e.priceMax;if(t.forEach((e=>{+e.priceMax>i&&(i=+e.priceMax)})),t.length>0)if(i>+e.priceMax)a=e.minPrice;else if(i==+e.priceMax){a=this.state.repairList.find((e=>+e.priceMax==i&&t.some((s=>s.shortcode==e.shortcode)))).shortcode==e.shortcode?e.priceMax:e.minPrice}return(0,p.jsxs)("div",{className:"itemModel",children:[(0,p.jsx)("div",{className:"model",children:(0,p.jsxs)("p",{children:[e.title," (",e.shortcode,")"]})}),(0,p.jsx)("div",{className:"price",children:(0,p.jsxs)("p",{children:[a," ",window.currencyValue]})})]},s)}}mapBasketItems(e,s){if(11==e.productTypeId)return(0,p.jsxs)("div",{className:"itemModel",children:[(0,p.jsx)("div",{className:"model",children:(0,p.jsx)("p",{children:e.name})}),(0,p.jsx)("div",{className:"price",children:(0,p.jsxs)("p",{children:[e.price," ",window.currencyValue]})})]},s)}checkIsLogin(e){let{isLogin:s}=this.props.user;s||(e.preventDefault(),this.props.userActions.setRedirectTo("/kundenkonto"))}render(){let{basketData:e,totalPrice:s}=this.state;return(0,p.jsx)("div",{className:"paymentPage",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)("div",{className:"col-md-8 col-md-push-2",children:(0,p.jsxs)("div",{className:"wrapWindow text-center",children:[(0,p.jsx)("div",{className:"circle ok"}),(0,p.jsx)("p",{className:"bigText",children:"Herzlichen Gl\xfcckwunsch"}),(0,p.jsx)("p",{className:"smallText",children:"Vielen Dank f\xfcr Ihre Bestellung, wir werden diese umgehend bearbeiten."}),(0,p.jsx)("h3",{children:"Bestell\xfcbersicht"}),(0,p.jsx)("div",{className:"wrapBasketItems first",children:e.map(this.mapBasketItemsDevices)}),(0,p.jsx)("div",{className:"wrapBasketItems",children:e.map(this.mapBasketItems)}),(0,p.jsxs)("div",{className:"total",children:[(0,p.jsx)("p",{className:"col-xs-6 title",children:"Total inkl. MwSt"}),(0,p.jsxs)("p",{className:"col-xs-6 priceTotal",children:[Math.round(100*s)/100," ",window.currencyValue]})]}),(0,p.jsxs)(a.rU,{to:"/kundenkonto",className:"btn",onClick:this.checkIsLogin,children:["Im Detail ansehen",(0,p.jsx)("span",{children:(0,p.jsx)("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"})})]})]})})})})}}h.defaultProps={};const m=(0,n.$j)((function(e){return{user:e.user}}),(function(e){return{basketActions:(0,l.DE)(d,e),userActions:(0,l.DE)(o,e)}}),null,{pure:!1})(h)}}]);